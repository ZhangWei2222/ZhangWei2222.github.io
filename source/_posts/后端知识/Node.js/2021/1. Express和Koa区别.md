---
title: Express和Koa区别
date: 2021-07-07 16:53:37
categories:
- 后端知识
comments: true
---

## 概念

express 是一个基于 Node.js 平台的极简、灵活的 web 应用开发框架，主要基于 Connect 中间件，并且自身封装了 路由、视图处理等功能，使用人数众多。

Koa 相对更为年轻，是 express 原班人马基于 es 新特性重新开发的框架，主要基于 co 中间件，基于 es6 generator 特性的异步流程控制，解决了回调地狱问题和麻烦的错误处理。但自身不包含任何中间件，很多功能需要借助第三方中间件解决。

Koa2 是 koa 的 2.0 版本，使用 async 和 await 来实现异步流程控制。



## 区别

|              | express                                          | Koa                                                          |
| ------------ | ------------------------------------------------ | ------------------------------------------------------------ |
| 自身集成     | 自身集成了路由、视图处理等功能                   | 不集成任何中间件，很多功能需要借助第三方中间件解决           |
| 异步流程控制 | 采用 callback                                    | Koa1 采用 generator<br />Koa2 采用 async / await             |
| 错误处理     | 使用 callback 捕获异常，对于深层次的异常捕获不了 | 使用 try catch 能更好的解决异常捕获                          |
| 中间件模型   | 基于 connect 中间件，线性模型                    | 采用洋葱圈模型，所有的请求在经过中间件的时候都会执行两次，能够非常方便的执行一些后置处理逻辑 |
| context      | 只有 request 和 response 两个对象                | 增加了一个 context 对象，作为这次请求的上下文对象。Koa1 中为中间件的 this，Koa2 为中间件的第一个参数。<br />同时context 对象也挂载了 request、response 两个对象<br />和 express 类似，这两个对象都提供了大量的便捷方法辅助开发 |



## 应用

因为 express 和 koa 是 无态度的Web框架，极其灵活，不利于企业级的多人开发维护。

于是诞生了 egg.js 和 nest.js，定位是框架的框架。约定一些规范，上手成本高，但是后期维护与扩展会很爽。

egg.js 基于 koa ，Nest.js 默认基于 Express，可以基于其他框架

