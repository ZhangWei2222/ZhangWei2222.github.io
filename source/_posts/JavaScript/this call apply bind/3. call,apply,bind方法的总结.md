---
title: call,apply,bind方法的总结
date: 2019-03-01 10:31:48
categories:
- JavaScript
tags:
- this/call/apply/bind
comments: true
---

## 用途

call 、apply 、bind 三者都是用来改变函数的this对象的指向的

<!-- more -->



## call、apply 区别

- call 接收的是参数列表
- apply 接收的是参数数组
- 参数是传给调用的对象的

```js
var a ={
  name : "Cherry",
  fn : function (a,b) {
   console.log( a + b)
  }
 }
 var b = a.fn;
 b.call(a,1,2)  // 3

var a ={
  name : "Cherry",
  fn : function (a,b) {
   console.log( a + b)
  }
 }
 var b = a.fn;
 b.apply(a,[1,2])  // 3
```

> 如果传入一个原始值（字符串、布尔或数字类型）来当做`this`的绑定对象， 这个原始值会被转换成它的对象形式（`new String()`），这通常被称为“装箱”。



## call、apply 与 bind 区别

call 和 apply 都是改变上下文中的this并立即执行这个函数，bind方法可以让对应的函数想什么时候调就什么时候调用

```js
var a ={
  name : "Cherry",
  fn : function (a,b) {
   console.log( a + b)
  }
 }
var b = a.fn;
b.bind(a,1,2)()   // 3
---  或  ---
var c = b.bind(a,1,2)
c //注意，返回的是一个函数
//ƒ (a,b) {
// console.log( a + b)
//}
c() // 3
```

### 多次绑定 bind 只有第一次是有效的

```js
var one = function(){
	console.log(this.x);
}
var two = {
	x: 1
}
var three = {
	x: 2
}
var fn = one.bind(two).bind(three);
fn(); //1
```

因为 bind() 的实现，相当于使用函数在内部包了一个 call/apply，第二次 bind() 相当于再包住第一次 bind()，所以后面的 bind 都是无效的

```js
var fn = function() {
    return function() {
    	one.apply(two);
    }.apply(three);
}
```



## 利用 call() 和 apply() 方法实现 bind() 方法

```js
if( !function(){}.bind ) {
    Function.prototype.bind = function(obj) {
        var self = this; //this 是调用函数的对象
        var args = Array.prototype.slice.call(arguments); //将 arguments 类数组转换成数组
        
        return function() {
            return self.apply(obj, args.slice(1));
        }
    }
}
```

