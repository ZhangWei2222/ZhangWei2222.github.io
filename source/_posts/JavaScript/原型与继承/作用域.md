---
title: 作用域作用域.assets
date: 2019-08-30 11:17:37
categories:
- JavaScript
tags:
comments: false
---

## 作用域

每一个变量、函数都有其作用的范围，超出作用不得使用



## 作用域链

1. 函数**被创建或者被定义**的时候，函数对象有一个**内部属性 [[scope]]**，它**引用了一条作用域链**，也可以理解为对象列表


2. 在函数 a **创建**时，它的**作用域链中会填入一个全局对象**，该全局对象**包含了所有全局变量**
3. 当**执行** a函数的时候，会创建一个该函数的**执行期上下文的内部对象**
4. 当这个执行期上下文被创建时，他的作用域链会被**初始化**为当前执行的函数对象里的**[[scope]]属性中所包含的对象**
5. 然后解释器创建一个**活动对象**，这个活动对象包含当前这个**执行函数里所有的局部变量**（内部var 声明的）**，命名参数（形参），参数合集（arguments）以及this**
6. 然后此活动对象会被**推入执行期上下文里作用域链的前端**
7. 当函数执行完毕，该**执行期上下文**就会**被销毁**

![img](https://img.youpin.mi-img.com/jianyu/81bd774792f5b9483d82e392994d3afe.png?w=776&h=625)

## 作用域链的作用

- 用于**解析标识符**
  - 函数执行上下文被创建好之后，解释器开始自上至下的解释代码了，这时每**遇到一个标示符**，都会遍历这个**执行上下文里的作用域链**
    - 首先在**最顶层的活动对象**里去找，如果没找到，再**找下一层**，最终**找到全局作用域**
    - 如果还没找到一般会报语法错误；但是当**对未定义的变量执行赋值运算时**，解释器会在**全局作用域创建该变量并赋值**。这一点很重要，编程时要小心，防止污染全局环境，或者造成内存泄露的问题