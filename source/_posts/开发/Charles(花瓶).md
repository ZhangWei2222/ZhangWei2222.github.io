---
title: Charles(花瓶)
date: 2019-11-01 18:12:47
categories:
- 开发
comments: false
---



## 前言

之前实习时使用过花瓶进行抓包，现在又使用它进行代理、本地mock，整理一下它的用途。

<!-- more -->



## 用途

1. 可以获取 http 的内容，对移动端的网页进行 debugger，将电脑设置成手机的 http 代理，手机 wifi 要设置成电脑的同一个域，结果就是手机的请求都会通过这个电脑，返回数据也会通过这个电脑，所以这个电脑上的Charles 就可以拿到这个手机的请求以及请求的返回；
2. 在工具栏 `Tools->Map Remote`（快捷键 `option+command+M`）,可以设置代理，Map Form(输入啥网址)，Map To(本地地址 localhost 端口号..)，意思是：输入 form 的地址，会代理到本地，把本地的代码拿过来，因为本地的接口的地址是默认取网址的前缀，所以可以跑出来，而直接输入 localhost 会出不来，因为接口地址不对；
3. 可以自定义 mock 接口的内容，在工具栏 `Tools->Map Local`（快捷键 `option+command+L`，或者直接右键接口文件），把接口的内容代理成自己自定义的文件，然后再右键 repeat，即可！



## 安装

 [花瓶破解版](https://xclient.info/s/charles.html)

之前因为正版没破解，30分钟就要手动重开一次，非常麻烦。装了破解版后，发现代理成功，但是没有抓包成功

解决： 设置-》wifi-》代理-》配置 网页代理、安全网页代理 127.0.0.1:8888

正版可能默认配置了



> 遇到的一个小问题：重启了一下电脑，发现不能连上网，但是wifi一切正常
>
> 原因：开了花瓶，wifi设置了代理，把网站都转发了，要么开花瓶上网，要么去掉代理~

