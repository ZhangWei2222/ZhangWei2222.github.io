<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.2" />






<meta name="description" content="Dream high">
<meta property="og:type" content="website">
<meta property="og:title" content="ZhangWei2222">
<meta property="og:url" content="http://super-wei.xyz/index.html">
<meta property="og:site_name" content="ZhangWei2222">
<meta property="og:description" content="Dream high">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZhangWei2222">
<meta name="twitter:description" content="Dream high">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://super-wei.xyz/"/>





  <title>ZhangWei2222</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ZhangWei2222</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2018/03/19/wow-js-animate-css/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/19/wow-js-animate-css/" itemprop="url">wow.js & animate.css</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-19T16:08:43+08:00">
                2018-03-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="如何实现随着滚动条滚动加载动画呢"><a href="#如何实现随着滚动条滚动加载动画呢" class="headerlink" title="如何实现随着滚动条滚动加载动画呢"></a>如何实现随着滚动条滚动加载动画呢</h1><p>使用wow.js 和animate.css即可实现随滚动条加载酷炫动画</p>
<ul>
<li><p>引入js和css</p>
<pre><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;css/animate.css&quot;&gt;

&lt;script src=&quot;js/wow.min.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
new WOW().init();
&lt;/script&gt;    
</code></pre></li>
<li><p>在类名加入 wow 和喜欢的动画效果名字</p>
<pre><code>&lt;div class=&quot;wow bounceInUp&quot;&gt;
Content to Reveal Here
&lt;/div&gt;
</code></pre></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2018/03/19/git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/19/git/" itemprop="url">git</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-19T16:05:00+08:00">
                2018-03-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>克隆仓库到本地</li>
<li>git status</li>
<li>git add . </li>
<li>git commit -m ‘更新的内容写在这’</li>
<li>git pull origin master</li>
<li>git push origin master</li>
</ul>
<p>如果仓库更新，则在之前把仓库更新的内容拉过来</p>
<ul>
<li>git pull</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2018/03/19/移动端网站/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/19/移动端网站/" itemprop="url">移动端网站</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-19T15:57:22+08:00">
                2018-03-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="如何适配移动端呢？"><a href="#如何适配移动端呢？" class="headerlink" title="如何适配移动端呢？"></a>如何适配移动端呢？</h1><p>可使用flexible框架</p>
<ul>
<li><p>在head标签引入文件</p>
<pre><code>&lt;script src=&quot;./common/flexible.debug.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;./common/flexible_css.debug.js&quot;&gt;&lt;/script&gt;
</code></pre></li>
<li><p>注释</p>
<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt; --&gt;
</code></pre></li>
</ul>
<p>然后html会在不同的设备下产生不同的font-size值，我们可以利用px2rem进行书写css，以达到自动适配的目的。对于gulp配置px2rem的方法，详情写gulp-px2rem</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2018/03/19/gulp-px2rem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/19/gulp-px2rem/" itemprop="url">gulp px2rem</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-19T15:52:08+08:00">
                2018-03-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="如何用px2rem处理css文件呢？"><a href="#如何用px2rem处理css文件呢？" class="headerlink" title="如何用px2rem处理css文件呢？"></a>如何用px2rem处理css文件呢？</h1><p>先把.styl文件编译成.css文件，接着处理</p>
<pre><code>//px2rem处理
gulp.task(&apos;px2rem&apos;,function() {
  return gulp.src(&apos;./src/css/index.css&apos;)
    .pipe(px2rem({
      baseDpr: 2,             // base device pixel ratio (default: 2)
      threeVersion: false,    // whether to generate @1x, @2x and @3x version (default: false)
      remVersion: true,       // whether to generate rem version (default: true)
      remUnit: 75,            // rem unit value (default: 75)
      remPrecision: 6         // rem precision (default: 6)
    }))
    .pipe(gulp.dest(&apos;./src/css&apos;))
});
</code></pre><p>在./src/css中就会生成index.debug.css文件</p>
<p>最终的结果是</p>
<pre><code>.selector {
    width: 150px;
    height: 64px; /*px*/
    font-size: 28px; /*px*/
    border: 1px solid #ddd; /*no*/
}

.selector {
    width: 2rem;
    border: 1px solid #ddd;
}
[data-dpr=&quot;1&quot;] .selector {
    height: 32px;
    font-size: 14px;
}
[data-dpr=&quot;2&quot;] .selector {
    height: 64px;
    font-size: 28px;
}
[data-dpr=&quot;3&quot;] .selector {
    height: 96px;
    font-size: 42px;
}
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2018/03/15/gulp初接触/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/15/gulp初接触/" itemprop="url">gulp初接触</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-15T15:43:08+08:00">
                2018-03-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="gulp安装"><a href="#gulp安装" class="headerlink" title="gulp安装"></a>gulp安装</h1><p>全局：<strong>npm install gulp -g</strong></p>
<p>开发环境：<strong>npm install gulp –save-dev</strong></p>
<h1 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h1><pre><code>-dist //打包目录
    -css
        -built.css
        -built.min.css
    -js
        -built.js
        -built.min.js
    -images
-src //开发目录
    -css
        -built.css
        -built.css.map
    -js
        -js1.js
        -js2.js
    -stylus
        -stylus1.styl
        -stylus2.styl
    -images
    -index.html //项目入口
-gulpfile.js //配置文件
-package-lock.json
-package.json //配置信息
</code></pre><p>首先在package.json文件中添加项目信息</p>
<pre><code>{
    &quot;name&quot;: &quot;gulp_test&quot;,
    &quot;version&quot;: &quot;1.0.0&quot;
}
</code></pre><h1 id="引入模块和插件"><a href="#引入模块和插件" class="headerlink" title="引入模块和插件"></a>引入模块和插件</h1><h2 id="1-引入模块"><a href="#1-引入模块" class="headerlink" title="1.引入模块"></a>1.引入模块</h2><pre><code>// gulpfile.js
var gulp = require(&apos;gulp&apos;);
</code></pre><h2 id="2-插件"><a href="#2-插件" class="headerlink" title="2.插件"></a>2.插件</h2><h3 id="gulp中的几个比较常用的插件"><a href="#gulp中的几个比较常用的插件" class="headerlink" title="gulp中的几个比较常用的插件"></a>gulp中的几个比较常用的插件</h3><blockquote>
<p>gulp-concat : 合并文件(js/css)</p>
<p>gulp-rename : 文件重命名</p>
<p>gulp-htmlmin : 压缩html文件</p>
<p>gulp-imagemin : 压缩图片</p>
<p>gulp-uglify : 压缩js文件</p>
<p>gulp-livereload : 实时自动编译刷新</p>
<p>gulp-connect : 热加载</p>
<p>gulp-stylus : 编译stylus</p>
<p>gulp-clean-css : 压缩css</p>
<p>gulp-sourcemaps : 可在浏览器调试工具中查看到对应代码在stylus的位置</p>
<p>gulp-postcss : 扩展的语法和特性转换成现代的浏览器友好的CSS</p>
<p>autoprefixer : 自动添加css浏览器前缀</p>
<p>cssnano : 压缩，去空格，去注释，去覆盖等</p>
</blockquote>
<h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><blockquote>
<p>gulp.src(filePath/pathArr)：指向指定路径的所有文件，返回文件流对象，用于读取文件</p>
<p>gulp.dest(dirPath/pathArr)：指向指定的所有文件夹，用于向文件夹中输出文件</p>
<p>gulp.task(name, [deps], fn)：定义一个任务</p>
<p>gulp.watch()：监听文件的变化</p>
</blockquote>
<h2 id="3-各部分打包代码"><a href="#3-各部分打包代码" class="headerlink" title="3.各部分打包代码"></a>3.各部分打包代码</h2><h3 id="stylus-css处理"><a href="#stylus-css处理" class="headerlink" title="stylus css处理"></a>stylus css处理</h3><pre><code>gulp.task(&apos;stylusTask&apos;, function () {
  var processor = [
    autoprefixer,
    cssnano
  ];
  return gulp.src(&apos;src/stylus/*.styl&apos;)
    .pipe(sourcemaps.init())
    .pipe(stylus())
    .pipe(postcss(processor))
    .pipe(concat(&apos;built.css&apos;))
    .pipe(sourcemaps.write(&apos;./&apos;))
    .pipe(gulp.dest(&apos;src/css&apos;))
    .pipe(livereload());
});
</code></pre><h3 id="打包asset"><a href="#打包asset" class="headerlink" title="打包asset"></a>打包asset</h3><pre><code>gulp.task(&apos;copyAsset&apos;, function () {
  return gulp.src([
    &apos;./src/asset/**/*&apos;
    // &apos;./src/asset/jquery/**/*&apos;
  ])
    .pipe(gulp.dest(&apos;./dist/asset&apos;))
})
</code></pre><h3 id="打包html"><a href="#打包html" class="headerlink" title="打包html"></a>打包html</h3><pre><code>gulp.task(&apos;copyHtml&apos;, function () {
  return gulp.src(&apos;./src/*.html&apos;)
    .pipe(htmlmin({
        collapseWhitespace:true,
        collapseBooleanAttributes:true,
        removeComments:true,
        removeEmptyAttributes:true,
        removeScriptTypeAttributes:true,
        removeStyleLinkTypeAttributes:true,
        minifyJS:true,
        minifyCSS:true    
    }))
    .pipe(gulp.dest(&apos;./dist&apos;))
})
</code></pre><h3 id="打包css"><a href="#打包css" class="headerlink" title="打包css"></a>打包css</h3><pre><code>gulp.task(&apos;cssTask&apos;, [&apos;stylusTask&apos;], function () {
  return gulp.src(&apos;./src/css/built.css&apos;)
    .pipe(gulp.dest(&apos;./dist/css&apos;))
    .pipe(rename({suffix:&apos;.min&apos;}))
    .pipe(cleanCSS({compatibility:&apos;ie8&apos;}))
    .pipe(gulp.dest(&apos;./dist/css&apos;))
})
</code></pre><h3 id="打包js"><a href="#打包js" class="headerlink" title="打包js"></a>打包js</h3><pre><code>gulp.task(&apos;jsTask&apos;, function () {
  return gulp.src(&apos;./src/js/*.js&apos;)
    .pipe(concat(&apos;built.js&apos;)) //合并到临时文件夹
    .pipe(gulp.dest(&apos;./dist/js&apos;)) //生成到目标文件夹
    .pipe(rename({suffix:&apos;.min&apos;})) //重命名
    .pipe(uglify()) //压缩
    .pipe(gulp.dest(&apos;./dist/js&apos;))
})
</code></pre><h3 id="打包图片"><a href="#打包图片" class="headerlink" title="打包图片"></a>打包图片</h3><pre><code>gulp.task(&apos;copyImages&apos;, function () {
  return gulp.src(&apos;./src/images/*&apos;)
    .pipe(imagemin({
      optimizationLevel: 5, //类型：Number  默认：3  取值范围：0-7（优化等级）
      progressive: true, //类型：Boolean 默认：false 无损压缩jpg图片
      interlaced: true, //类型：Boolean 默认：false 隔行扫描gif进行渲染
      multipass: true //类型：Boolean 默认：false 多次优化svg直到完全优化
    }))
    .pipe(gulp.dest(&apos;./dist/images&apos;))
})
</code></pre><h3 id="热加载"><a href="#热加载" class="headerlink" title="热加载"></a>热加载</h3><pre><code>gulp.task(&apos;reload&apos;, function () {
  return gulp.src(&apos;src/*.html&apos;)
    .pipe(connect.reload())
});
</code></pre><h3 id="监听"><a href="#监听" class="headerlink" title="监听"></a>监听</h3><pre><code>gulp.task(&apos;server&apos;, function () {
  connect.server({
    root: &apos;src&apos;,
    livereload: true,
    port: 5000
  })
});

gulp.task(&apos;auto&apos;, function() {
  gulp.watch(&apos;src/stylus/*.styl&apos;, [&apos;stylusTask&apos;]);
  gulp.watch(&apos;src/css/*.css&apos;, [&apos;reload&apos;])
  gulp.watch(&apos;src/*.html&apos;, [&apos;reload&apos;]);
  gulp.watch(&apos;src/js/*.js&apos;, [&apos;reload&apos;]);
});
</code></pre><h3 id="执行任务"><a href="#执行任务" class="headerlink" title="执行任务"></a>执行任务</h3><pre><code>gulp.task(&apos;default&apos;, [&apos;server&apos;, &apos;auto&apos;]);

gulp.task(&apos;product&apos;, [&apos;cssTask&apos;, &apos;copyHtml&apos;, &apos;copyImages&apos;, &apos;jsTask&apos;, &apos;copyAsset&apos;, &apos;copyImages&apos;])
</code></pre><h1 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h1><pre><code>// /*
// * gulp-concat : 合并文件(js/css)
// * gulp-rename : 文件重命名
// * gulp-htmlmin : 压缩html文件
// * gulp-imagemin : 压缩图片
// * gulp-uglify : 压缩js文件
// * gulp-livereload : 实时自动编译刷新
// * gulp-connect : 热加载

// * gulp-stylus : 编译stylus
// * gulp-clean-css : 压缩css
// * gulp-sourcemaps : 可在浏览器调试工具中查看到对应代码在stylus的位置
// * gulp-postcss : 扩展的语法和特性转换成现代的浏览器友好的CSS
// * autoprefixer : 自动添加css浏览器前缀
// * cssnano : 压缩，去空格，去注释，去覆盖等

// *
// * gulp.src(filePath/pathArr)：指向指定路径的所有文件, 返回文件流对象，用于读取文件
// * gulp.dest(dirPath/pathArr)：指向指定的所有文件夹，用于向文件夹中输出文件
// * gulp.task(name, [deps], fn)：定义一个任务
// * gulp.watch()：监视文件的变化
// */

var gulp = require(&apos;gulp&apos;);

// common plyugin
var concat = require(&apos;gulp-concat&apos;),
    rename = require(&apos;gulp-rename&apos;),
    htmlmin = require(&apos;gulp-htmlmin&apos;),
    imagemin = require(&apos;gulp-imagemin&apos;),
    uglify = require(&apos;gulp-uglify&apos;),
    livereload = require(&apos;gulp-livereload&apos;),
    connect = require(&apos;gulp-connect&apos;);

var stylus = require(&apos;gulp-stylus&apos;),
    sourcemaps = require(&apos;gulp-sourcemaps&apos;),
    postcss = require(&apos;gulp-postcss&apos;),
    autoprefixer = require(&apos;autoprefixer&apos;),
    cleanCSS = require(&apos;gulp-clean-css&apos;),
    cssnano = require(&apos;cssnano&apos;);

// var cheerio = require(&apos;gulp-cheerio&apos;);

// instruction
gulp.task(&apos;help&apos;,function () {
  console.log(&apos;    gulp                       自定义开发模式&apos;);
  console.log(&apos;    gulp build                文件打包&apos;);
  console.log(&apos;    gulp watch                文件监控打包&apos;);
  console.log(&apos;    gulp help                  gulp参数说明&apos;);
  console.log(&apos;    gulp server                测试server&apos;);
  console.log(&apos;    gulp -p                      生产环境（默认生产环境）&apos;);
  console.log(&apos;    gulp -d                      开发环境&apos;);
  console.log(&apos;    gulp -m &lt;module&gt;        部分模块打包（默认全部打包）&apos;);
});

//stylus css处理
gulp.task(&apos;stylusTask&apos;, function () {
  var processor = [
    autoprefixer,
    cssnano
  ];
  return gulp.src(&apos;src/stylus/*.styl&apos;)
    .pipe(sourcemaps.init())
    .pipe(stylus())
    .pipe(postcss(processor))
    .pipe(concat(&apos;built.css&apos;))
    .pipe(sourcemaps.write(&apos;./&apos;))
    .pipe(gulp.dest(&apos;src/css&apos;))
    .pipe(livereload());
});

//打包asset
gulp.task(&apos;copyAsset&apos;, function () {
  return gulp.src([
    &apos;./src/asset/**/*&apos;
    // &apos;./src/asset/jquery/**/*&apos;
  ])
    .pipe(gulp.dest(&apos;./dist/asset&apos;))
})

//打包html
gulp.task(&apos;copyHtml&apos;, function () {
  return gulp.src(&apos;./src/*.html&apos;)
    .pipe(htmlmin({
        collapseWhitespace:true,
        collapseBooleanAttributes:true,
        removeComments:true,
        removeEmptyAttributes:true,
        removeScriptTypeAttributes:true,
        removeStyleLinkTypeAttributes:true,
        minifyJS:true,
        minifyCSS:true    
    }))
    .pipe(gulp.dest(&apos;./dist&apos;))
})

//打包css
gulp.task(&apos;cssTask&apos;, [&apos;stylusTask&apos;], function () {
  return gulp.src(&apos;./src/css/built.css&apos;)
    .pipe(gulp.dest(&apos;./dist/css&apos;))
    .pipe(rename({suffix:&apos;.min&apos;}))
    .pipe(cleanCSS({compatibility:&apos;ie8&apos;}))
    .pipe(gulp.dest(&apos;./dist/css&apos;))
})

//打包js
gulp.task(&apos;jsTask&apos;, function () {
  return gulp.src(&apos;./src/js/*.js&apos;)
    .pipe(concat(&apos;built.js&apos;)) //合并到临时文件夹
    .pipe(gulp.dest(&apos;./dist/js&apos;)) //生成到目标文件夹
    .pipe(rename({suffix:&apos;.min&apos;})) //重命名
    .pipe(uglify()) //压缩
    .pipe(gulp.dest(&apos;./dist/js&apos;))
})

//打包图片
gulp.task(&apos;copyImages&apos;, function () {
  return gulp.src(&apos;./src/images/*&apos;)
    .pipe(imagemin({
      optimizationLevel: 5, //类型：Number  默认：3  取值范围：0-7（优化等级）
      progressive: true, //类型：Boolean 默认：false 无损压缩jpg图片
      interlaced: true, //类型：Boolean 默认：false 隔行扫描gif进行渲染
      multipass: true //类型：Boolean 默认：false 多次优化svg直到完全优化
    }))
    .pipe(gulp.dest(&apos;./dist/images&apos;))
})

//热加载
gulp.task(&apos;reload&apos;, function () {
  return gulp.src(&apos;src/*.html&apos;)
    .pipe(connect.reload())
});

//监听
gulp.task(&apos;server&apos;, function () {
  connect.server({
    root: &apos;src&apos;,
    livereload: true,
    port: 5000
  })
});

gulp.task(&apos;auto&apos;, function() {
  gulp.watch(&apos;src/stylus/*.styl&apos;, [&apos;stylusTask&apos;]);
  gulp.watch(&apos;src/css/*.css&apos;, [&apos;reload&apos;])
  gulp.watch(&apos;src/*.html&apos;, [&apos;reload&apos;]);
  gulp.watch(&apos;src/js/*.js&apos;, [&apos;reload&apos;]);
});


//执行任务
gulp.task(&apos;default&apos;, [&apos;server&apos;, &apos;auto&apos;]);

gulp.task(&apos;product&apos;, [&apos;cssTask&apos;, &apos;copyHtml&apos;, &apos;copyImages&apos;, &apos;jsTask&apos;, &apos;copyAsset&apos;, &apos;copyImages&apos;])
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2017/12/23/摇头晃脑小哥/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/23/摇头晃脑小哥/" itemprop="url">摇头晃脑小哥</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-23T12:28:58+08:00">
                2017-12-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://oncweb6po.bkt.clouddn.com/person.gif" alt=""></p>
<blockquote>
<p>因为之前做过一个动画的项目，大量运用animation，keyframe。无意中发现这个小demo，有一些启发。</p>
</blockquote>
<h3 id="1-包含层不用设置高度"><a href="#1-包含层不用设置高度" class="headerlink" title="1.包含层不用设置高度"></a>1.包含层不用设置高度</h3><pre><code>&lt;div class=&quot;head&quot;&gt;
    &lt;div class=&quot;face&quot;&gt;&lt;/div&gt;    
&lt;/div&gt;
.head{
    position: absolute;
    top: 20px;
    left: 50%;
}
.face{
    position: absolute;
    top:75px;
    left: 50%;
    margin-left: -60px;
    width: 120px;
    height: 170px;
    border-radius: 30px;
    background-color:  #fff7e5;
}
</code></pre><p>到时高度会被子元素撑起</p>
<h3 id="2-animation-延迟参数"><a href="#2-animation-延迟参数" class="headerlink" title="2.animation 延迟参数"></a>2.animation 延迟参数</h3><p>之前的项目用的是js的settimeout，做了demo才恍然大悟，有延迟参数呀！</p>
<h3 id="3-z-index"><a href="#3-z-index" class="headerlink" title="3.z-index"></a>3.z-index</h3><p>想要设置z-index，就必须要设position：relative, absolute或者fixed都可以。</p>
<h3 id="4-倾斜"><a href="#4-倾斜" class="headerlink" title="4.倾斜"></a>4.倾斜</h3><p>如果只是简单的倾斜，transform: rotate(Xdeg);就可以做到了，但是有时候还要考虑这个倾斜掉的元素的定位，所以严谨一点的话，还可以设置transform-origin这个属性。最主要就是记住：第一个值是水平（X），第二个值是竖直（Y）；默认的中心是50%，50%，左上角是0，0，右下角是100%，100%。</p>
<h3 id="5-圆角"><a href="#5-圆角" class="headerlink" title="5.圆角"></a>5.圆角</h3><ul>
<li><p>上下两头是半圆、中间是长方形</p>
<ul>
<li>只要让border-radius的值等于宽度的一半就可以了</li>
</ul>
</li>
<li><p>半圆形</p>
<ul>
<li>底部两个的圆角border-radius: 0 0 10px 10px</li>
</ul>
</li>
<li><p>下半圆角</p>
<ul>
<li>border-bottom-left-radius(上下左右)</li>
</ul>
</li>
</ul>
<h3 id="6-代码优化"><a href="#6-代码优化" class="headerlink" title="6.代码优化"></a>6.代码优化</h3><p>因为keyframe,animation需要写很多兼容，所以采用stylus，可以节省很多时间</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2017/10/17/css3实现网页平滑过渡效果/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/10/17/css3实现网页平滑过渡效果/" itemprop="url">css3实现网页平滑过渡效果</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-10-17T21:31:19+08:00">
                2017-10-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、如何用纯css判断盒子被选中？"><a href="#一、如何用纯css判断盒子被选中？" class="headerlink" title="一、如何用纯css判断盒子被选中？"></a>一、如何用纯css判断盒子被选中？</h1><p>用radio</p>
<h1 id="二、font-smoothing"><a href="#二、font-smoothing" class="headerlink" title="二、font-smoothing"></a>二、font-smoothing</h1><ul>
<li>功能：css3中用于设置字体的抗锯齿或者说光滑度的属性</li>
<li><p>语法规则：</p>
<pre><code>font-smoothing:subpixel-antialiased | none | antialiased
</code></pre></li>
<li><p>取值说明</p>
</li>
</ul>
<blockquote>
<p>none用于小像素的文本、subpixel-antialiased浏览器默认的、antialiased反锯齿</p>
</blockquote>
<h1 id="三、translate3d"><a href="#三、translate3d" class="headerlink" title="三、translate3d"></a>三、translate3d</h1><p>可以开启GPU硬件加速</p>
<h1 id="四、backface-visibility"><a href="#四、backface-visibility" class="headerlink" title="四、backface-visibility"></a>四、backface-visibility</h1><ul>
<li>功能：定义当元素不面向屏幕时是否可见</li>
<li>语法规则：<pre><code>backface-visibility:visible | hidden
</code></pre></li>
<li>取值说明：</li>
</ul>
<p>visible:背面是可见的</p>
<p>hidden:背面是不可见的</p>
<h1 id="五、图标三角背景制作"><a href="#五、图标三角背景制作" class="headerlink" title="五、图标三角背景制作"></a>五、图标三角背景制作</h1><p>当画一个大三角形的时候，可以先用css画一个大矩形，再旋转，最后放到合适的地方露出直角，隐藏其他</p>
<h1 id="六、怎么实现动画过渡"><a href="#六、怎么实现动画过渡" class="headerlink" title="六、怎么实现动画过渡"></a>六、怎么实现动画过渡</h1><p>当写了transform时，动画是一下子变得，没有过渡。要实现过渡，需要在变换的盒子上加上transition</p>
<h1 id="七、怎么实现网页平滑过渡效果"><a href="#七、怎么实现网页平滑过渡效果" class="headerlink" title="七、怎么实现网页平滑过渡效果"></a>七、怎么实现网页平滑过渡效果</h1><pre><code>/* 内容 */
.st-scroll,
.st-panel{
    width: 100%;
    height:100%;
    position: relative; 
}

.st-scroll{
    left: 0;
    top: 0;
    -webkit-transform: translate3d(0,0,0);
    -moz-transform: translate3d(0,0,0);
    -o-transform: translate3d(0,0,0);
    -ms-transform: translate3d(0,0,0);
    transform: translate3d(0,0,0);
    -webkit-backface-visibility: hidden;
    /* 过渡谁就写谁 */
    -webkit-transition: all 0.6s ease-in-out; 
    -moz-transition: all 0.6s ease-in-out;
    -o-transition: all 0.6s ease-in-out;
    -ms-transition: all 0.6s ease-in-out;
    transition: all 0.6s ease-in-out;
}

.st-panel{
    background: #fff;
    overflow: hidden;
}

#st-control-1:checked ~ .st-scroll{
    -webkit-transform: translateY(0%);
    -moz-transform: translateY(0%);
    -o-transform: translateY(0%);
    -ms-transform: translateY(0%);
    transform: translateY(0%);
}
</code></pre><p>.st-scroll 是全部内容，.st-panel是单个内容。核心思想是，让每个内容100%占据网页，然后通过选择导航栏，让scroll移动（translateY)</p>
<h1 id="八、-font-face实现小icon"><a href="#八、-font-face实现小icon" class="headerlink" title="八、@font-face实现小icon"></a>八、@font-face实现小icon</h1><p>所有你要出现图标的div，都要加上data-icon的属性。里面的值就是显示的东西。css中用属性选择器进行书写，属性选择器要加[]</p>
<pre><code>&lt;div class=&quot;st-desc&quot; data-icon=&quot;C&quot;&gt;&lt;/div&gt;

[data-icon]:after{
    content: attr(data-icon);
}
</code></pre><h3 id="font-face"><a href="#font-face" class="headerlink" title="@font-face"></a>@font-face</h3><ul>
<li>功能</li>
</ul>
<p>@font-face 是css3中的一个模块，主要用于将自己定义的Web字体嵌入到网页中</p>
<ul>
<li><p>语法规则</p>
<p>  @font-face{</p>
<pre><code>font-family : &lt;YourWebFontName&gt;;
src : &lt;source&gt; [&lt;format&gt;][,&lt;source&gt;[&lt;format&gt;]]*;
[font-weight:&lt;weight&gt;];
[font-style:&lt;style&gt;];
</code></pre><p>  }</p>
</li>
<li><p>取值说明</p>
</li>
</ul>
<p>source:此值指的是你自定义的字体的存放路径，可以是相对路径也可以是绝对路径；</p>
<p>format:此值指的是你自定义的字体的格式，主要用来帮助浏览器识别，其值主要有以下几种类型：</p>
<p>truetype,opentype,truetype-aat,embedded-opentype,svg等；</p>
<ul>
<li>常用的几种字体格式</li>
</ul>
<ol>
<li>TureType(.ttf)格式</li>
<li>OpenType(.otf)格式</li>
<li>Web Open Font Format(.woff)格式</li>
<li>Embedded Open Type(.eot)格式</li>
<li>SVG(.svg)格式</li>
</ol>
<ul>
<li>字体下载</li>
</ul>
<p>网址：<a href="http://www.dafont.com/" target="_blank" rel="external">http://www.dafont.com/</a></p>
<p>网址：<a href="http://www.google.com/webfonts" target="_blank" rel="external">http://www.google.com/webfonts</a></p>
<h1 id="九、transition-amp-amp-animation-区别"><a href="#九、transition-amp-amp-animation-区别" class="headerlink" title="九、transition &amp;&amp; animation 区别"></a>九、transition &amp;&amp; animation 区别</h1><p>transition 必须要事件触发，而animation用不用事件触发都可以</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2017/09/09/split-formatDate-store-util组件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/09/split-formatDate-store-util组件/" itemprop="url">split,formatDate,store,util组件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-09T17:58:01+08:00">
                2017-09-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="split组件-vue-的代码"><a href="#split组件-vue-的代码" class="headerlink" title="split组件(vue)的代码"></a>split组件(vue)的代码</h2><p>split组件因为常使用,所以单独独立出来,并且结构相当简单.</p>
<pre><code>&lt;template&gt;
  &lt;div class=&quot;split&quot;&gt;&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  export default {};
&lt;/script&gt;

&lt;style lang=&quot;stylus&quot; rel=&quot;stylesheet/stylus&quot;&gt;
  .split
    width: 100%
    height: 16px
    border-top: 1px solid rgba(7, 17, 27, 0.1)
    border-bottom: 1px solid rgba(7, 17, 27, 0.1)
    background: #f3f5f7
&lt;/style&gt;
</code></pre><h2 id="formatDate-js组件"><a href="#formatDate-js组件" class="headerlink" title="formatDate.js组件"></a>formatDate.js组件</h2><pre><code>&lt;!--vue过滤器使用--&gt;
&lt;div class=&quot;time&quot;&gt;{{rating.rateTime | formatDate}}&lt;/div&gt;
</code></pre><hr>
<pre><code>//在es6下,export 函数function的导入需要这样写
import { formatDate } from &apos;../../common/js/date&apos;; //导入自定义的date模块

//vue里面的filters
filters: {
      formatDate(time) {
        let date = new Date(time);
        //调用date模块的formatDate函数来解析时间
        return formatDate(date, &apos;yyyy-MM-dd hh:mm&apos;);
      }
    },
</code></pre><p>formatDate.js是一个自定义的js组件,不是vue组件,目录位于:src/common/js,这种写法是为了练习js的模块化编程</p>
<ul>
<li>将单独的一个函数写成一个模块</li>
</ul>
<ul>
<li>通过export导出函数</li>
</ul>
<ul>
<li><p>通过import导入函数</p>
<pre><code>export function formatDate(date, fmt) { //在es6下导出一个函数
//对一个或多个y进行匹配,匹配到就进行年的替换(年有四位,所以需要特殊处理)
  if (/(y+)/.test(fmt)) {
    fmt = fmt.replace(RegExp.$1, (date.getFullYear() + &apos;&apos;).substr(4 - RegExp.$1.length));
  }
  let o = {
    &apos;M+&apos;: date.getMonth() + 1, //js的月是从0开始算,所以要加1
    &apos;d+&apos;: date.getDate(),
    &apos;h+&apos;: date.getHours(),
    &apos;m+&apos;: date.getMinutes(),
    &apos;s+&apos;: date.getSeconds()
  };
  //对月,日,时,分,秒进行匹配替换(这些都是两位,可以一起处理)
  for (let k in o) {
    if (new RegExp(`(${k})`).test(fmt)) { //匹配到key例如MM
      let str = o[k] + &apos;&apos;; //然后o[&apos;MM&apos;] 就是date.getMonth() + 1

      //如果匹配到的时间是1位数,例如是M,那么就直接使用date.getMonth() + 1的值,
      //如果是两位数,那么就在前面补0,使用padLeftZero函数
      fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? str : padLeftZero(str)); 
    }
  }
  return fmt;
};

//先加两个0,然后再根据长度截取(因为最长也就2个0的长度)
function padLeftZero(str) {
  return (&apos;00&apos; + str).substr(str.length);
}
</code></pre><h2 id="store-js组件"><a href="#store-js组件" class="headerlink" title="store.js组件"></a>store.js组件</h2></li>
</ul>
<p>这是一个js模块,负责html5的localstoage存储和读取的,位置: src/common/js/store.js</p>
<p>使用的方法是:</p>
<pre><code>//在es6下,export 函数function的导入需要这样写
 import { saveToLocal, loadFromLocal } from &apos;../../common/js/store&apos;;
</code></pre><p>代码:</p>
<pre><code>//存储
//传入三个参数,seller的id,要存储的key和value
export function saveToLocal (id, key, value) {
//需要加上window对象来使用localstorage
  let seller = window.localStorage.__seller__; //使用__只是一种标记写法,标记是自定义的某种编码规范,这里代表这只是seller的数据
  if (!seller) { //第一次生成seller的时候初始化
    seller = {}; 
    seller[id] = {};
  } else {
    seller = JSON.parse(seller); //json字符串需要解析
    if (!seller[id]) { //不同seller的时候初始化
      seller[id] = {};
    }
  }
  seller[id][key] = value; //生成当前的seller对象
  //localStorage只能存储字符串,需要转成json字符串
  window.localStorage.__seller__ = JSON.stringify(seller);
}

//读取
三个参数,seller的id,之前存储的key,和一个默认值
export function loadFromLocal (id, key, def) {
  let seller = window.localStorage.__seller__;
  if (!seller) { //读取不到返回默认值
    return def; 
  }
  seller = JSON.parse(seller)[id]; //json解析
  if (!seller) { //解析失败返回默认值
    return def;
  }
  let ret = seller[key]; 
  return ret || def; //解析成功但是没有这个seller的id的也返回默认值
}
</code></pre><ul>
<li>在node里面,没有默认全局window对象,所以需要指定加上才能使用window的相关方法和属性</li>
</ul>
<ul>
<li>seller[id][key] = value; 相当于是某个id的seller的某个属性(key)和值(value)保存为一个对象</li>
</ul>
<ul>
<li>关于写入的逻辑:先读取localstorage的已有值,判断是否存在,然后再去解析localstoage的已有值,判断是否等于当前的数据的key值(id),最后再处理最终的值是否存储,这里逻辑需要先判断已有值.</li>
</ul>
<ul>
<li>关于读取的逻辑:先读取localstorage判断是否有值,然后再去判断解析localstoage读取得到的值,最后再处理最终得到的值是否正常,按顺序进行逻辑处理<h2 id="util-js组件"><a href="#util-js组件" class="headerlink" title="util.js组件"></a>util.js组件</h2></li>
</ul>
<p>这个js模块负责获取url的参数,位置:src/common/js/util.js</p>
<pre><code>/**
 * 解析url参数
 * @example ?id=12345&amp;a=b
 * @return Object {id:12345,a:b}
 */

export function urlParse () {
  let url = window.location.search; //获取到url的所有参数
  let obj = {};
  let reg = /[?&amp;][^?&amp;]+=[^?&amp;]+/g; //正则判断获取
  let arr = url.match(reg); //正则获取后会保存到一个数组
  // [&apos;?id=12345&apos;,&apos;&amp;a=b&apos;]
  if (arr) {
    arr.forEach((item) =&gt; {
      let tempArr = item.substring(1).split(&apos;=&apos;); //将第一位去掉,然后用等号分隔
      let key = decodeURIComponent(tempArr[0]); //URI对于utf8格式会转码,所以这里需要解码
      let val = decodeURIComponent(tempArr[1]);
      obj[key] = val;
    });
  }
  return obj;
}
</code></pre><ul>
<li>读取url的所有参数,例如<a href="http://a.com/?id=12345&amp;a=b的?id=12345&amp;a=b" target="_blank" rel="external">http://a.com/?id=12345&amp;a=b的?id=12345&amp;a=b</a></li>
</ul>
<ul>
<li>然后进行正则匹配,/[?&amp;][^?&amp;]+=[&amp;?&amp;]+/g,以?id=12345&amp;a=b为举例:</li>
</ul>
<pre><code>- [?&amp;] 先匹配?和&amp;的,url参数都是有这个2个字符作为连接符,就是指匹配?


- [^?&amp;]+ 然后匹配非?和&amp;的多个,就是指匹配id


- = 匹配等号


- [^?&amp;]+ 然后匹配非?和&amp;的多个,就是指匹配12345
加起来就是能够匹配?id=12345&amp;a=b
</code></pre><ul>
<li>用对象返回,方便处理.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2017/09/09/商家页面seller-vue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/09/商家页面seller-vue/" itemprop="url">商家页面seller.vue</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-09T17:57:35+08:00">
                2017-09-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="主体结构"><a href="#主体结构" class="headerlink" title="主体结构"></a>主体结构</h2><h3 id="html代码"><a href="#html代码" class="headerlink" title="html代码"></a>html代码</h3><pre><code>&lt;div class=&quot;seller&quot; ref=&quot;seller&quot;&gt;
    &lt;div class=&quot;seller-content&quot;&gt;
      &lt;!--overview部分--&gt;
      &lt;div class=&quot;overview&quot;&gt;

      &lt;/div&gt;
      &lt;split&gt;&lt;/split&gt;
      &lt;!--bulltin部分--&gt;
      &lt;div class=&quot;bulletin&quot;&gt;

      &lt;/div&gt;
      &lt;split&gt;&lt;/split&gt;
      &lt;!--pics部分--&gt;
      &lt;div class=&quot;pics&quot;&gt;

      &lt;/div&gt;
      &lt;split&gt;&lt;/split&gt;
      &lt;!--info部分--&gt;
      &lt;div class=&quot;info&quot;&gt;

      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
</code></pre><ul>
<li><p>seller-contentdiv是能够扩大高度的,能够被内容增加而撑高,而seller div是固定的高度的,从而形成滚动</p>
<h3 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a>js代码</h3><pre><code>import BScroll from &apos;better-scroll&apos;;
import split from &apos;../split/split&apos;;

export default {
  props: {
    seller: { //app.vue里面router-view会传入一个seller
      type: Object
    }
  },
  watch: { //当seller变动的时候会触发
    &apos;seller&apos;() {
      this.$nextTick(() =&gt; {
        this._initScroll();
        this._initPics();
      });
    }
  },
  mounted() { //在dom被渲染之后触发
    this.$nextTick(() =&gt; {
      this._initScroll();
      this._initPics();
    });
  },
  methods: {
    _initScroll() {
      if (!this.scroll) {
        this.scroll = new BScroll(this.$refs.seller, {
          click: true
        });
      } else {
        this.scroll.refresh();
      }
    },
    _initPics() {
      //详细代码在下面,这里暂时先忽略
    }
  },
  components: {
    split
  }
};
</code></pre></li>
</ul>
<ul>
<li>使用watch方法是为了监听数据seller的变化,因为当打开页面的时候,seller是异步获取的,并不一定是能够马上获取,没有seller的数据,相关dom就无法被渲染,并且bscroll是基于dom执行的,所以需要监听seller的变化然后来重新执行相关的初始化函数</li>
</ul>
<ul>
<li>使用mounted方法是为了保证相关dom渲染完成,因为bscroll是基于dom执行的,但是当切换页面的时候,dom会重新渲染,但未必能够马上完成,所以需要在mounted方法里面重新执行相关的初始化函数</li>
</ul>
<ul>
<li><p>关于watch和mounted的使用要基于vue的生命周期来理解vue生命周期</p>
<h3 id="css代码"><a href="#css代码" class="headerlink" title="css代码"></a>css代码</h3><pre><code>.seller
  position: absolute
  top: 174px //给header留空间
  bottom: 0
  left: 0
  width: 100%
  overflow: hidden //隐藏多余部分,因为需要滚动
</code></pre><h2 id="overview部分"><a href="#overview部分" class="headerlink" title="overview部分"></a>overview部分</h2><h3 id="html部分"><a href="#html部分" class="headerlink" title="html部分"></a>html部分</h3><pre><code>&lt;div class=&quot;overview&quot;&gt;
  &lt;h1 class=&quot;title&quot;&gt;{{seller.name}}&lt;/h1&gt;
  &lt;div class=&quot;desc border-1px&quot;&gt;
    &lt;star :size=&quot;36&quot; :score=&quot;seller.score&quot;&gt;&lt;/star&gt;
    &lt;span class=&quot;text&quot;&gt;({{seller.ratingCount}})&lt;/span&gt;
    &lt;span class=&quot;text&quot;&gt;月售{{seller.sellCount}}单&lt;/span&gt;
  &lt;/div&gt;
  &lt;!--列表处理remark内容--&gt;
  &lt;ul class=&quot;remark&quot;&gt;
  &lt;!--使用一个block块包裹内容--&gt;
    &lt;li class=&quot;block&quot;&gt;
    &lt;!--标题用h2标签--&gt;
      &lt;h2&gt;起送价&lt;/h2&gt;
      &lt;!--用content块包裹内容--&gt;
      &lt;div class=&quot;content&quot;&gt;
      &lt;!--用span代表特殊字体--&gt;
        &lt;span class=&quot;stress&quot;&gt;{{seller.minPrice}}&lt;/span&gt;元
      &lt;/div&gt;
    &lt;/li&gt;
    &lt;li class=&quot;block&quot;&gt;
      &lt;h2&gt;商家配送&lt;/h2&gt;
      &lt;div class=&quot;content&quot;&gt;
        &lt;span class=&quot;stress&quot;&gt;{{seller.deliveryPrice}}&lt;/span&gt;元
      &lt;/div&gt;
    &lt;/li&gt;
    &lt;li class=&quot;block&quot;&gt;
      &lt;h2&gt;平均配送时间&lt;/h2&gt;
      &lt;div class=&quot;content&quot;&gt;
        &lt;span class=&quot;stress&quot;&gt;{{seller.deliveryTime}}&lt;/span&gt;分钟
      &lt;/div&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
  &lt;!--收藏按钮--&gt;
  &lt;div class=&quot;favorite&quot; @click=&quot;toggleFavorite&quot;&gt;
    &lt;span class=&quot;icon-favorite&quot; :class=&quot;{&apos;active&apos;:favorite}&quot;&gt;&lt;/span&gt;
    &lt;span class=&quot;text&quot;&gt;{{favoriteText}}&lt;/span&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre><h3 id="js部分"><a href="#js部分" class="headerlink" title="js部分"></a>js部分</h3><pre><code>import BScroll from &apos;better-scroll&apos;;
//引入一个利用html5的localstorage的存储模块
import { saveToLocal, loadFromLocal } from &apos;common/js/store&apos;;

export default {
  props: {
    seller: {
      type: Object
    }
  },
  data() {
    return {
      favorite: (() =&gt; { 
      //利用localstorage读取这个属性
        return loadFromLocal(this.seller.id, &apos;favorite&apos;, false);
      })()//vue需要返回的data必须是函数,所以加上()
    };
  },
  computed: {
    favoriteText() { //通过favorite的值来计算favoriteText的值
      return this.favorite ? &apos;已收藏&apos; : &apos;收藏&apos;;
    }
  },
  methods: {
    toggleFavorite(event) {
      if (!event._constructed) {
        return;
      }
      //通过取反来设置切换
      this.favorite = !this.favorite;
      //利用localstorage存储这个属性
      saveToLocal(this.seller.id, &apos;favorite&apos;, this.favorite);
    }
  }
};
</code></pre></li>
</ul>
<ul>
<li>store.js参考:split,formatDate,store,util组件<h3 id="css部分"><a href="#css部分" class="headerlink" title="css部分"></a>css部分</h3>  .overview<pre><code>position: relative //设置相对布局参考位置
padding: 18px
.title
  margin-bottom: 8px
  line-height: 14px
  color: rgb(7, 17, 27)
  font-size: 14px
.desc
  padding-bottom: 18px
  border-1px(rgba(7, 17, 27, 0.1))
  font-size: 0
  .star
    display: inline-block
    margin-right: 8px
    vertical-align: top //行内对齐
  .text
    display: inline-block
    margin-right: 12px
    line-height: 18px
    vertical-align: top //行内对齐
    font-size: 10px
    color: rgb(77, 85, 93)
.remark
  display: flex //flex布局
  padding-top: 18px
  .block
    flex: 1 //flex布局等分区域
    text-align: center
    border-right: 1px solid rgba(7, 17, 27, 0.1)
    &amp;:last-child
      border: none
    h2
      margin-bottom: 4px
      line-height: 10px
      font-size: 10px
      color: rgb(147, 153, 159)
    .content //设置该块的公共属性
      line-height: 24px
      font-size: 10px
      color: rgb(7, 17, 27)
      .stress //特殊大小再插入class覆盖
        font-size: 24px
.favorite
  position: absolute
  width: 50px //设置一个固定宽度,被text-align使用
  right: 11px
  top: 18px
  text-align: center
  .icon-favorite
    display: block
    margin-bottom: 4px
    line-height: 24px
    font-size: 24px
    color: #d4d6d9
    &amp;.active
      color: rgb(240, 20, 20)
  .text
    line-height: 10px
    font-size: 10px
    color: rgb(77, 85, 93)
</code></pre><h2 id="bulletin部分"><a href="#bulletin部分" class="headerlink" title="bulletin部分"></a>bulletin部分</h2><h3 id="html代码-1"><a href="#html代码-1" class="headerlink" title="html代码"></a>html代码</h3>  <div class="bulletin"><br>          <h1 class="title">公告与活动</h1><br>          <div class="content-wrapper border-1px"><br>            <p class="content"></p><br>          </div><br>          <ul v-if="seller.supports" class="supports"><br>            <li class="support-item border-1px" v-for="(item,index) in seller.supports"><br>            <!--使用classMap做对应--><br>              <span class="icon" :class="classMap[seller.supports[index].type]"></span><br>              <span class="text"></span><br>            </li><br>          </ul><br>        </div>


</li>
</ul>
<blockquote>
<p>classMap的原理(classMap使用在之前的header组件使用过Header.vue)</p>
</blockquote>
<ul>
<li>seller.supports的结构是这样的<br>  “supports”: [<pre><code>  {
    &quot;type&quot;: 0,
    &quot;description&quot;: &quot;在线支付满28减5&quot;
  },
  {
    &quot;type&quot;: 1,
    &quot;description&quot;: &quot;VC无限橙果汁全场8折&quot;
  },
  {
    &quot;type&quot;: 2,
    &quot;description&quot;: &quot;单人精彩套餐&quot;
  },
  {
    &quot;type&quot;: 3,
    &quot;description&quot;: &quot;该商家支持发票,请下单写好发票抬头&quot;
  },
  {
    &quot;type&quot;: 4,
    &quot;description&quot;: &quot;已加入“外卖保”计划,食品安全保障&quot;
  }
],
</code></pre></li>
</ul>
<ul>
<li>classMap是[‘decrease’, ‘discount’, ‘special’, ‘invoice’, ‘guarantee’]这样的,这个顺序是按照设计需要和数据结构排的,例如type为0对应在线支付满28减5</li>
</ul>
<ul>
<li>如果要获取对应的class,就可以classMap[seller.supports[index].type],例如seller.supports[0].type就是0,那么就是classMap[0]就是decrease这个class</li>
</ul>
<ul>
<li><p>如果要获取对应的description就可以seller.supports[index].description,例如seller.supports[0].description就直接知道了supports数组的第一个元素的description属性的值了</p>
<h3 id="js代码-1"><a href="#js代码-1" class="headerlink" title="js代码"></a>js代码</h3><pre><code>import split from &apos;../split/split&apos;;

export default {
  props: {
    seller: {
      type: Object
    }
  },
  created() { //使用自建的一个classMap数组来对应不同的类别
    this.classMap = [&apos;decrease&apos;, &apos;discount&apos;, &apos;special&apos;, &apos;invoice&apos;, &apos;guarantee&apos;];
  },
  components: {
    split
  }
};
</code></pre></li>
</ul>
<ul>
<li>使用created方法是为了在加载的时候第一时间完成,因为vue的渲染需要this.classMap属性(created是vue的生命周期的第一个)<h3 id="css代码-1"><a href="#css代码-1" class="headerlink" title="css代码"></a>css代码</h3>  @import “../../common/stylus/mixin.styl”<pre><code>.bulletin
  padding: 18px 18px 0 18px
  .title
    margin-bottom: 8px
    line-height: 14px
    color: rgb(7, 17, 27)
    font-size: 14px
  .content-wrapper
    padding: 0 12px 16px 12px
    border-1px(rgba(7, 17, 27, 0.1))
    .content
      line-height: 24px
      font-size: 12px
      color: rgb(240, 20, 20)
  .supports
    .support-item
      padding: 16px 12px
      border-1px(rgba(7, 17, 27, 0.1))
      font-size: 0
      &amp;:last-child
        border-none() //需要引入一个mixin,处理没边框的问题
    .icon
      display: inline-block
      width: 16px
      height: 16px
      vertical-align: top
      margin-right: 6px
      background-size: 16px 16px
      background-repeat: no-repeat
      &amp;.decrease //使用设计要求的大小的图标
        bg-image(&apos;decrease_4&apos;) //使用mixin处理这些图标
      &amp;.discount
        bg-image(&apos;discount_4&apos;)
      &amp;.guarantee
        bg-image(&apos;guarantee_4&apos;)
      &amp;.invoice
        bg-image(&apos;invoice_4&apos;)
      &amp;.special
        bg-image(&apos;special_4&apos;)
    .text
      line-height: 16px
      font-size: 12px
      color: rgb(7, 17, 27)
</code></pre><h2 id="pics部分"><a href="#pics部分" class="headerlink" title="pics部分"></a>pics部分</h2><h3 id="html代码-2"><a href="#html代码-2" class="headerlink" title="html代码"></a>html代码</h3>  <div class="pics"><br>          <h1 class="title">商家实景</h1><br>          <!--两个ref绑定picWrapper,picList--><br>          <div class="pic-wrapper" ref="picWrapper"><br>          <!--列表循环输出图片--><br>            <ul class="pic-list" ref="picList"><br>              <li class="pic-item" v-for="pic in seller.pics"><br>              <!--固定图片尺寸--><br>                <img :src="pic" width="120" height="90"><br>              </li><br>            </ul><br>          </div><br>  </div>


</li>
</ul>
<ul>
<li>ref获取picWrapper是为了滚动图片需要,父DOM是picWrapper,子DOM是picList</li>
</ul>
<ul>
<li>ref获取picList是为了计算图片列表的总长度,用来设置图片列表的横向滚动,因为滚动的触发条件是子DOM比父DOM要”大”的时候才会触发,由于图片的数量是未知的,所以需要去计算,然后写入到picList<h3 id="js代码-2"><a href="#js代码-2" class="headerlink" title="js代码"></a>js代码</h3>  _initPics() { //编程习惯的前置下划线,代表内部使用的方法<pre><code>if (this.seller.pics) {
  let picWidth = 120; //
  let margin = 6;
  //这是图片列表的总长度
  let width = (picWidth + margin) * this.seller.pics.length - margin;
  //设置图片列表的宽度等于列表的总长度
  this.$refs.picList.style.width = width + &apos;px&apos;;
  //异步绑定滚动
  this.$nextTick(() =&gt; {
    if (!this.picScroll) {
      this.picScroll = new BScroll(this.$refs.picWrapper, {
        scrollX: true, //bscroll的横向滚动属性
        eventPassthrough: &apos;vertical&apos; //bscroll的过滤垂直滚动
      });
    } else {
      this.picScroll.refresh();
    }
  });
}
</code></pre></li>
</ul>
<ul>
<li>一般来说,当某页面本身是垂直滚动的时候,中间的某个DOM需要做横向滚动的话,需要处理滚动坐标的变化,例如手势滚动的时候有x,y坐标,是向上,下,左还是右会区分</li>
</ul>
<ul>
<li>图片列表的总长度是单个图片的宽度+单个图片的外边距的和乘以图片的数量,再减去最后一个图片的外边距</li>
</ul>
<ul>
<li>BScroll插件需要增加一个属性scrollX: true来传入横向的滚动坐标,也需要增加一个属性eventPassthrough: ‘vertical’过滤垂直的滚动,前者已经解释过,后者是因为需要横向滚动的页面是内嵌在垂直滚动的页面的里面的,所以会造成外面的垂直滚动事件也会传入到横向滚动的页面,为了避免影响横向滚动,所以需要屏蔽垂直滚动的事件</li>
</ul>
<ul>
<li>我们平时在做这种滚动内嵌滚动的时候也可以参考这个处理方法.</li>
</ul>
<ul>
<li>另外异步绑定滚动的常规做法,先判断是否已经有BScroll实例了,然后再确定是否需要刷新<h3 id="css代码-2"><a href="#css代码-2" class="headerlink" title="css代码"></a>css代码</h3>  .pics<pre><code>padding: 18px
.title
  margin-bottom: 12px
  line-height: 14px
  color: rgb(7, 17, 27)
  font-size: 14px
.pic-wrapper
  width: 100% //图片列表区域是屏幕宽度
  overflow: hidden //隐藏多余部分
  white-space: nowrap  //连续的空白符会被合并
  .pic-list
    font-size: 0 //行内元素取消间隙
    .pic-item
      display: inline-block
      margin-right: 6px
      width: 120px
      height: 90px
      &amp;:last-child //最后一个图片没有外边距
        margin: 0
</code></pre><h2 id="info部分"><a href="#info部分" class="headerlink" title="info部分"></a>info部分</h2><h3 id="html代码-3"><a href="#html代码-3" class="headerlink" title="html代码"></a>html代码</h3><pre><code>&lt;div class=&quot;info&quot;&gt;
  &lt;h1 class=&quot;title border-1px&quot;&gt;商家信息&lt;/h1&gt;
  &lt;ul&gt;
    &lt;li class=&quot;info-item&quot; v-for=&quot;info in seller.infos&quot;&gt;{{info}}&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
</code></pre><h3 id="css代码-3"><a href="#css代码-3" class="headerlink" title="css代码"></a>css代码</h3>  .info<pre><code>padding: 18px 18px 0 18px
color: rgb(7, 17, 27)
.title
  padding-bottom: 12px
  line-height: 14px
  border-1px(rgba(7, 17, 27, 0.1))
  font-size: 14px
.info-item
  padding: 16px 12px
  line-height: 16px
  border-1px(rgba(7, 17, 27, 0.1)) //1像素的border 的mixin
  font-size: 12px
  &amp;:last-child
    border-none() //没有border的mixin
</code></pre></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2017/09/09/商品详情页food-vue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/09/商品详情页food-vue/" itemprop="url">商品详情页food.vue</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-09T17:57:19+08:00">
                2017-09-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="主体结构"><a href="#主体结构" class="headerlink" title="主体结构"></a>主体结构</h2><h3 id="html代码"><a href="#html代码" class="headerlink" title="html代码"></a>html代码</h3><pre><code>&lt;template&gt;
  &lt;transition name=&quot;move&quot;&gt;
  &lt;!--要实现这个商品详情页的内容滚动,所以需要有一个显示标志和一个dom绑定--&gt;
  &lt;div v-show=&quot;showFlag&quot; class=&quot;food&quot; ref=&quot;food&quot;&gt;
  &lt;/div&gt;
  &lt;/transition&gt;
&lt;/template&gt;    
</code></pre><ul>
<li>用ref绑定food的DOM元素,为了被bscroll做滚动处理</li>
</ul>
<ul>
<li>用transition包裹了整个food,为了实现这个页面的进入和退出动画<h3 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a>js代码</h3><pre><code>import BScroll from &apos;better-scroll&apos;;
export default {
  props: {
    food: {
      type: Object
    }
  },
  data(){
    return {
      showFlag: false 
    }
  },
  methods: {
    show(){
      this.showFlag = true; 
      this.$nextTick(() =&gt; { //异步添加滚动绑定
        if (!this.scroll) {
          this.scroll = new BScroll(this.$refs.food, {
            click: true
          });
        } else {
          this.scroll.refresh();
        }
      })
    },
    hide(){
      this.showFlag = false;
    }
}
</code></pre></li>
</ul>
<ul>
<li>通过跟hide方法切换showFlag的值来实现显示隐藏</li>
</ul>
<ul>
<li>因为整个页面是比较长的,需要做滚动,所以异步加载bscroll<h3 id="css代码"><a href="#css代码" class="headerlink" title="css代码"></a>css代码</h3><pre><code>.food
  position: fixed //霸占屏幕,全屏显示,所以用fixed布局
  left: 0
  top: 0
  bottom: 48px //保留底部购物车底部栏的位置
  z-index: 30 //z-index的数值是有考究的,要控制好各个页面的z-index纵深
  width: 100%
  background: #fff
  transform: translate3d(0, 0, 0)
  &amp;.move-enter-active, &amp;.move-leave-active //用vue的动画配置实现动画
    transition: all 0.2s linear
  &amp;.move-enter, &amp;.move-leave-active
    transform: translate3d(100%, 0, 0)
</code></pre></li>
</ul>
<ul>
<li>对于整个商品详情页的打开和关闭效果体验,需要对其做动画处理,transition</li>
</ul>
<ul>
<li>动画是3d变形,从右往左(改变的是x坐标),直线移动(linear)<h2 id="商品封面"><a href="#商品封面" class="headerlink" title="商品封面"></a>商品封面</h2><h3 id="html代码-1"><a href="#html代码-1" class="headerlink" title="html代码"></a>html代码</h3>  <div class="image-header"><pre><code>&lt;img :src=&quot;food.image&quot;&gt;
&lt;!--有一个返回按钮,绑定一个hide方法--&gt;
&lt;div class=&quot;back&quot; @click=&quot;hide&quot;&gt;
&lt;!--使用icon--&gt;
  &lt;i class=&quot;icon-arrow_lift&quot;&gt;&lt;/i&gt; 
&lt;/div&gt;
</code></pre>  </div><h3 id="js代码-1"><a href="#js代码-1" class="headerlink" title="js代码"></a>js代码</h3><pre><code>export default {
  props: {
    food: { //用goods.vue组件传入的food数据
      type: Object
    }
  }
}
</code></pre></li>
</ul>
<ul>
<li>在goods.vue组件上传入的food数据<food @add="addFood" :food="selectedFood" ref="food" \=""><h3 id="css代码-1"><a href="#css代码-1" class="headerlink" title="css代码"></a>css代码</h3>  .image-header<pre><code>position: relative
width: 100%
height: 0
padding-top: 100% //这是一个css-hack技巧
img
  position: absolute
  top: 0
  left: 0
  width: 100% //图片撑满整个img的div
  height: 100%
.back
  position: absolute
  top: 10px
  left: 0
  .icon-arrow_lift //返回按钮,使用的是icon的那个css
    display: block
    padding: 10px
    font-size: 20px
    color: #fff
</code></pre></food></li>
</ul>
<ul>
<li>在w3c规定里面,padding设置100%的时候,这个值的计算是相对于这个盒子模型的宽度计算的,然后现在是宽是100%,所以padding也是100%,然后使用的是padding-top,那么就是内上边距的高度就是宽度的值,所以这样就能自然撑开一个正方形,这样的目的在于页面打开的时候更自然,不会出现闪烁<h2 id="商品标题"><a href="#商品标题" class="headerlink" title="商品标题"></a>商品标题</h2><h3 id="html代码-2"><a href="#html代码-2" class="headerlink" title="html代码"></a>html代码</h3>  <div class="content"><br>    <h1 class="title"></h1><br>    <div class="detail"><br>      <span class="sell-count">月售份</span><br>      <span class="rating">好评率%</span><br>    </div><br>    <div class="price"><br>      <span class="now">￥</span><span class="old" v-show="food.oldPrice">￥</span><br>    </div><br>    <!--引入cartcontrol组件,并且用一个div包裹他--><br>    <div class="cartcontrol-wrapper"><br>      <cartcontrol @add="addFood" :food="food"></cartcontrol><br>    </div><br>    <transition name="fade"><br>    <!--使用.stop.prevent阻止冒泡和默认事件,避免穿透--><br>      <div @click.stop.prevent="addFirst" class="buy" v-show="!food.count || food.count===0"><br>        加入购物车<br>      </div><br>    </transition><br>  </div>


</li>
</ul>
<ul>
<li>加入购物车按钮有一个动画fade,并且因为他的位置跟cartcontrol有重叠,避免穿透,所以直接.click.stop.prevent<br>加入购物车按钮的显示是通过判断food.count实现的,这个属性默认是没有的,当点击购物车按钮的时候强制生成Vue.set(this.food, ‘count’, 1);,这样做的目的是比较直观的增加一个属性去实现功能</li>
</ul>
<ul>
<li><p>cartcontrol的使用跟一般组件使用差不多.</p>
<h3 id="js代码-2"><a href="#js代码-2" class="headerlink" title="js代码"></a>js代码</h3><pre><code>import BScroll from &apos;better-scroll&apos;;
import Vue from &apos;vue&apos;;
import cartcontrol from &apos;../../components/cartcontrol/cartcontrol&apos;;

export default {
  props: {
    food: {
      type: Object
    }
  }
  methods: {
    addFirst(event){ //点击加入购物车按钮,传入事件
      if (!event._constructed) { //因为购物车按钮在bscroll里面,所以需要处理掉bscroll的事件类型
        return;
      }
      this.$emit(&apos;add&apos;, event.target); //触发当前实例food上的事件add(在goods组件上绑定在food组件的add方法)
      Vue.set(this.food, &apos;count&apos;, 1);
    },
    addFood(target) { //跟add关联的addFood方法
      this.$emit(&apos;add&apos;, target); //触发当前实例food上的事件add(在goods组件上绑定在food组件的add方法)
    }
  },
  components: {
    cartcontrol
  }
}
</code></pre></li>
</ul>
<ul>
<li>两次触发当前实例的事件add是因为两个操作都是同一个动作,这个动作是绑定在food组件上的add方法,而food组件会在goods组件中被导入<food @add="addFood" :food="selectedFood" ref="food"></food>,而在goods组件里面,addFood方法就会指向当前goods组件的方法_drop,继而使用shopcart的小球抛物线动画this.$refs.shopcart.drop(target);,这样就是实现了使用跨组件调用方法的效果.<h3 id="css代码-2"><a href="#css代码-2" class="headerlink" title="css代码"></a>css代码</h3>  .content<pre><code>position: relative
padding: 18px
.title
  line-height: 14px
  margin-bottom: 8px
  font-size: 14px
  font-weight: 700
  color: rgb(7, 17, 27)
.detail
  margin-bottom: 18px
  line-height: 10px
  height: 10px
  font-size: 0 //注意行内元素的空格
  .sell-count, .rating
    font-size: 10px
    color: rgb(147, 153, 159)
  .sell-count
    margin-right: 12px
.price //这里的css样式就是在goods.vue出现过的样式,所以直接贴过来使用,也可以做成组件
  font-weight: 700
  line-height: 24px
  .now
    margin-right: 8px
    font-size: 14px
    color: rgb(240, 20, 20)
  .old
    text-decoration: line-through
    font-size: 10px
    color: rgb(147, 153, 159)
.cartcontrol-wrapper //固定cartcontrol组件的样式
  position: absolute
  right: 12px
  bottom: 12px
.buy //加入购物车按钮的样式
  position: absolute
  right: 18px
  bottom: 18px
  z-index: 10 //显示在cartcontrol的更外面
  height: 24px
  line-height: 24px
  padding: 0 12px
  box-sizing: border-box //不希望padding和border把整个div撑大
  border-radius: 12px
  font-size: 10px
  color: #fff
  background: rgb(0, 160, 220)
  opacity: 1 //加入动画,一个是为了体验,另外一个是为了延迟触发隐藏,避免小球抛物线动画出现问题
  &amp;.fade-enter-active, &amp;.fade-leave-active
    transition: all 0.2s
  &amp;.fade-enter, &amp;.fade-leave-active
    opacity: 0
    z-index: -1
</code></pre></li>
</ul>
<ul>
<li>这里的z-index是10,因为加入购物车按钮和cartcontrol的按钮重叠了,所以需要设置一个比较靠外的z坐标</li>
</ul>
<ul>
<li>这里的box-sizing可以直观的设置盒子模型的实际大小,而不用计算边框和内边距的影响,<br>这是box-sizing:border-size之后的图,注意这个auto,这是因为盒子的大小被固定了,边框和内边距也是固定的,然后内容会根据被固定的大小进行auto适配,这种从外到内的空间设置比较直观和方便</li>
</ul>
<p><img src="http://oncweb6po.bkt.clouddn.com/1480597-fa20b7741a01637b.png" alt=""></p>
<ul>
<li>这里加入动画的原因是当点击加入购物车的按钮时候(addFirst),因为food.count被添加了数据Vue.set(this.food, ‘count’, 1);,所以加入购物车按钮会被隐藏(v-show的display:none),但同时会执行this.$emit(‘add’, event.target);,只不过这个是异步执行的,并且这个被异步执行的方法add是抛物线小球动画计算初始目标高度的地方,所以当传入的购物车按钮被设置为display:none的时候,动画的目标初始高度无法计算,就会去使用父层div的高度,从而影响了抛物线小球动画效果.</li>
</ul>
<pre><code>- 设置一个动画延迟隐藏购物车按钮,从而给足够的时间vue将数据传递到异步执行的方法,不影响抛物线小球的动画初始目标计算
</code></pre><h2 id="商品信息"><a href="#商品信息" class="headerlink" title="商品信息"></a>商品信息</h2><pre><code>&lt;!--引入split组件负责隔离行--&gt;
        &lt;split v-show=&quot;food.info&quot;&gt;&lt;/split&gt;
        &lt;div class=&quot;info&quot; v-show=&quot;food.info&quot;&gt;
          &lt;h1 class=&quot;title&quot;&gt;商品信息&lt;/h1&gt;
          &lt;p class=&quot;text&quot;&gt;{{food.info}}&lt;/p&gt;
        &lt;/div&gt;
  import split from &apos;../../components/split/split&apos;;

  export default {
    props: {
      food: {
        type: Object
      }
    },
    components: {
      split
    }
  }
    .info
      padding: 18px
      .title
        line-height: 14px
        margin-bottom: 6px
        font-size: 14px
        color: rgb(7, 17, 27)
      .text
        line-height: 24px
        padding: 0 8px
        font-size: 12px
        color: rgb(77, 85, 93)
</code></pre><h2 id="商品评价"><a href="#商品评价" class="headerlink" title="商品评价"></a>商品评价</h2><h3 id="html代码-3"><a href="#html代码-3" class="headerlink" title="html代码"></a>html代码</h3><pre><code>&lt;div class=&quot;rating&quot;&gt;
          &lt;h1 class=&quot;title&quot;&gt;商品评价&lt;/h1&gt;
          &lt;!--ratingselect组件--&gt;
          &lt;ratingselect @select=&quot;selectRating&quot; @toggle=&quot;toggleContent&quot; :selectType=&quot;selectType&quot;
                        :onlyContent=&quot;onlyContent&quot; :desc=&quot;desc&quot;
                        :ratings=&quot;food.ratings&quot;&gt;&lt;/ratingselect&gt;
          &lt;div class=&quot;rating-wrapper&quot;&gt;
          &lt;!--根据ratings长度显示ratings--&gt;
            &lt;ul v-show=&quot;food.ratings &amp;&amp; food.ratings.length&quot;&gt;
            &lt;!--根据不同类型的rateType来切换不同类型的rate--&gt;
              &lt;li v-show=&quot;needShow(rating.rateType,rating.text)&quot; v-for=&quot;rating in food.ratings&quot; class=&quot;rating-item border-1px&quot;&gt;
                &lt;div class=&quot;user&quot;&gt;
                  &lt;span class=&quot;name&quot;&gt;{{rating.username}}&lt;/span&gt;
                  &lt;img class=&quot;avatar&quot; width=&quot;12&quot; height=&quot;12&quot; :src=&quot;rating.avatar&quot;&gt;
                &lt;/div&gt;
                &lt;!--使用vue过滤器filter来处理时间--&gt;
                &lt;div class=&quot;time&quot;&gt;{{rating.rateTime | formatDate}}&lt;/div&gt;
                &lt;p class=&quot;text&quot;&gt;
                &lt;!--根据不同类型的rateType来控制icon的显示--&gt;
                  &lt;span
                    :class=&quot;{&apos;icon-thumb_up&apos;:rating.rateType===0,&apos;icon-thumb_down&apos;:rating.rateType===1}&quot;&gt;&lt;/span&gt;
                    {{rating.text}}
                &lt;/p&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
            &lt;!--没有rate的时候显示--&gt;
            &lt;div class=&quot;no-rating&quot; v-show=&quot;!food.ratings || !food.ratings.length&quot;&gt;&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
</code></pre><ul>
<li>绑定一个ratingselect组件,负责处理rate选择的</li>
</ul>
<ul>
<li>然后划分一个rating-wrapper区域,负责显示相关rate的信息</li>
</ul>
<ul>
<li>在子组件ratingselect选择的信息会影响到父组件的rating-wrapper区域内容的变化</li>
</ul>
<pre><code>- needShow控制当前rate的内容显示,包括不同的type和是否排除没内容的rate


- 绑定icon-thumb_up和icon-thumb_down的class来控制赞和批评的icon显示


- 根据json数据里面的ratings数组来控制是否显示rate
</code></pre><h3 id="js代码-3"><a href="#js代码-3" class="headerlink" title="js代码"></a>js代码</h3><pre><code>const ALL = 2; //将控制type类转为常量控制

import Vue from &apos;vue&apos;;
import ratingselect from &apos;../../components/ratingselect/ratingselect&apos;; //引入ratingselect组件

export default {
  props: {
    food: {
      type: Object
    }
  },
  data(){
    return { //这些是传入ratingselect组件的数据,并且初始化值
      selectType: ALL, //默认所有rate
      onlyContent: true, //默认只显示有内容的rate
      desc: {
        all: &apos;全部&apos;,
        positive: &apos;推荐&apos;,
        negative: &apos;吐槽&apos;
      }
    }
  },
  methods: {
    needShow(type, text){ 
      if (this.onlyContent &amp;&amp; !text) { //只显示有内容的 并且 没有内容就返回false
        return false;
      }

      if (this.selectType === ALL) { //显示全部类型的rate
        return true;
      } else { //只显示对应的类型的rate
        return type === this.selectType;
      }
    },
    selectRating(type) { //设置rate的类型
      this.selectType = type;
      this.$nextTick(() =&gt; {//切换的时候需要重新刷新bscroll
        this.scroll.refresh();
      });
    },
    toggleContent() { //切换显示是否有内容的rate
      this.onlyContent = !this.onlyContent;
      this.$nextTick(() =&gt; { //切换的时候需要重新刷新bscroll
        this.scroll.refresh();
      });
    }
  },
  components: {
    ratingselect
  }
}
</code></pre><ul>
<li>selectRating和toggleContent使用异步$nextTick是因为vue是异步更新dom的,当改变了vue属性时候,当前的dom不是立即更新的(会导致页面的高度变化了,但是bscroll来不及更新,影响滚动体验),而是会放进去异步更新队列里面等候更新,即使这个队列的等待时间不长,但是也来不及马上更新dom,所以使用$nextTick强制刷新这个队列</li>
</ul>
<ul>
<li>在food.vue组件使用selectRating和toggleContent来更新food.vue组件的属性,而不能在子组件ratingselect里面更新,因为vue限制了子组件不能更改父组件的属性,所以通过使用类似this.$emit(‘select’, type);来调用父组件的方法来更改</li>
</ul>
<h3 id="css代码-3"><a href="#css代码-3" class="headerlink" title="css代码"></a>css代码</h3><pre><code>.rating
  padding-top: 18px
  .title
    line-height: 14px
    margin-bottom: 6px
    font-size: 14px
    color: rgb(7, 17, 27)
  .rating-wrapper
    padding: 0 18px
    .rating-item
      position: relative;
      padding: 16px 0;
      border-1px(rgba(7, 17, 27, 0.1))
      .user
        position: absolute
        right: 0
        top: 16px
        line-height: 12px
        font-size: 0 //注意行内元素的空隙
        .name
          display: inline-block
          margin-right: 6px
          vertical-align: top
          font-size: 10px
          color: rgb(147, 153, 159)
        .avatar
          border-radius: 50%
      .time
        margin-bottom: 6px
        line-height: 12px
        font-size: 10px
        color: rgb(147, 153, 159)
      .text
        line-height: 16px
        font-size: 12px
        color: rgb(7, 17, 27)
        .icon-thumb_up, .icon-thumb_down 
          margin-right: 4px
          line-height: 16px
          font-size: 12px
        .icon-thumb_up
          color: rgb(0, 160, 220)
        .icon-thumb_down
          color: rgb(147, 153, 159)
    .no-rating
      padding: 16px 0
      font-size: 12px
      color: rgb(147, 153, 159)
</code></pre><p>商品评价里的时间处理<br>split组件和formatDate组件</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/person.jpg"
               alt="ZhangWei2222" />
          <p class="site-author-name" itemprop="name">ZhangWei2222</p>
           
              <p class="site-description motion-element" itemprop="description">Dream high</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/">
                <span class="site-state-item-count">59</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">29</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhangWei2222</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">主题 &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
