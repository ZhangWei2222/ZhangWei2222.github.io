<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.2" />






<meta name="description" content="Dream high">
<meta property="og:type" content="website">
<meta property="og:title" content="ZhangWei2222">
<meta property="og:url" content="http://super-wei.xyz/page/2/index.html">
<meta property="og:site_name" content="ZhangWei2222">
<meta property="og:description" content="Dream high">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZhangWei2222">
<meta name="twitter:description" content="Dream high">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://super-wei.xyz/page/2/"/>





  <title>ZhangWei2222</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ZhangWei2222</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2017/09/09/shopcart-vue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/09/shopcart-vue/" itemprop="url">shopcart.vue</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-09T17:57:03+08:00">
                2017-09-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="html代码"><a href="#html代码" class="headerlink" title="html代码"></a>html代码</h2><pre><code>&lt;template&gt;
&lt;!--vue的render渲染需要有一个root的根dom层,所以创建一个单独的div来包裹--&gt;
  &lt;div&gt;
  &lt;!--这是shopcart的主代码--&gt;
    &lt;div class=&quot;shopcart&quot;&gt;
    &lt;!--用toggleList点击显示隐藏购物车列表--&gt;
      &lt;div class=&quot;content&quot; @click=&quot;toggleList&quot;&gt;
        &lt;div class=&quot;content-left&quot;&gt;
          &lt;div class=&quot;logo-wrapper&quot;&gt;
            &lt;div class=&quot;logo&quot; :class=&quot;{&apos;highlight&apos;:totalCount&gt;0}&quot;&gt;
              &lt;i class=&quot;icon-shopping_cart&quot; :class=&quot;{&apos;highlight&apos;:totalCount&gt;0}&quot;&gt;&lt;/i&gt;
            &lt;/div&gt;
            &lt;div class=&quot;num&quot; v-show=&quot;totalCount&gt;0&quot;&gt;{{totalCount}}&lt;/div&gt;
          &lt;/div&gt;
          &lt;div class=&quot;price&quot; :class=&quot;{&apos;highlight&apos;:totalPrice&gt;0}&quot;&gt;￥{{totalPrice}}&lt;/div&gt;
          &lt;div class=&quot;desc&quot;&gt;另需配送费￥{{deliveryPrice}}元&lt;/div&gt;
        &lt;/div&gt;
        &lt;!--支付--&gt;
        &lt;div class=&quot;content-right&quot; @click.stop.prevent=&quot;pay&quot;&gt;
        &lt;!--这里class绑定的是一个payClass计算属性--&gt;
          &lt;div class=&quot;pay&quot; :class=&quot;payClass&quot;&gt;
            {{payDesc}}
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;!--省略了ball-container是动画小球的部分--&gt;
      &lt;!--shopcart的列表详情部分--&gt;
      &lt;transition name=&quot;fold&quot;&gt;
        &lt;div class=&quot;shopcart-list&quot; v-show=&quot;listShow&quot;&gt;
          &lt;div class=&quot;list-header&quot;&gt;
            &lt;h1 class=&quot;title&quot;&gt;购物车&lt;/h1&gt;
            &lt;span class=&quot;empty&quot; @click=&quot;empty&quot;&gt;清空&lt;/span&gt;
          &lt;/div&gt;
          &lt;div class=&quot;list-content&quot; ref=&quot;listContent&quot;&gt;
            &lt;ul&gt;
              &lt;li class=&quot;food&quot; v-for=&quot;food in selectFoods&quot;&gt;
                &lt;span class=&quot;name&quot;&gt;{{food.name}}&lt;/span&gt;
                &lt;div class=&quot;price&quot;&gt;
                  &lt;span&gt;￥{{food.price * food.count}}&lt;/span&gt;
                &lt;/div&gt;
                &lt;!--列表里面可以进行操作,所以会复用一个cartcontrol的组件--&gt;
                &lt;div class=&quot;cartcontrol-wrapper&quot;&gt;
                  &lt;cartcontrol @add=&quot;addFood&quot; :food=&quot;food&quot;&gt;&lt;/cartcontrol&gt;
                &lt;/div&gt;
              &lt;/li&gt;
            &lt;/ul&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/transition&gt;
    &lt;/div&gt;
    &lt;!--打开shopcart列表的时候背景需要虚化并且动画--&gt;
    &lt;transition name=&quot;fade&quot;&gt;
      &lt;div class=&quot;list-mask&quot; @click=&quot;hideList&quot; v-show=&quot;listShow&quot;&gt;&lt;/div&gt;
    &lt;/transition&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre><h2 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a>js代码</h2><pre><code>import BScroll from &apos;better-scroll&apos;;
import cartcontrol from &apos;../../components/cartcontrol/cartcontrol&apos;;

export default{
  props: {
    selectFoods: {
      type: Array,
      default(){ //data必须是一个函数,这是默认值data的写法
        return [ 
          {}
        ];
      }
    },
    deliveryPrice: { 
      type: Number,
      default: 0
    },
    minPrice: {
      type: Number,
      default: 0
    }
  },
  data(){
    return {
      fold: true //通过这个变量来控制隐藏和显示购物车列表,true代表隐藏,折叠起来
    }
  },
  computed: {
    totalPrice(){ //计算总价
      let total = 0;
      this.selectFoods.forEach((food) =&gt; {
        total += food.price * food.count; //这个count就是在goods组件里面添加的
      })
      return total;
    },
    totalCount(){ //计算总数量
      let count = 0;
      this.selectFoods.forEach((food) =&gt; {
        count += food.count;
      })
      return count;
    },
    payDesc(){ //只是简单的做一些支付显示的计算
      if (this.totalPrice === 0) {
        return `¥${this.minPrice}元起送`;
      } else if (this.totalPrice &lt; this.minPrice) {
        let diff = this.minPrice - this.totalPrice;
        return `还差¥${diff}元配送`;
      } else {
        return `去结算`;
      }
    },
    payClass(){
      if (this.totalPrice &lt; this.minPrice) {
        return &apos;not-enough&apos;;
      } else {
        return &apos;enough&apos;;
      }
    },
    listShow(){ //自动计算购物车列表是否显示和隐藏
      if (!this.totalCount) { //自动判断商品数量为空
        this.fold = true; //直接隐藏
        return false;
      }
      let show = !this.fold; //当flod为false的时候显示购物车列表
      if (show) { 
        this.$nextTick(() =&gt; { //异步执行滚动列表初始化
          if (!this.scroll) {
            this.scroll = new BScroll(this.$refs.listContent, {
              click: true
            });
          } else {
            this.scroll.refresh();
          }
        });
      }
      return show;
    }
  },
  methods: {
    toggleList(){
      if (!this.totalCount) {
        return;
      }
      this.fold = !this.fold;
    },
    empty() { //通过清空数据属性来控制购物车清空
      this.selectFoods.forEach((food) =&gt; {
        food.count = 0;
      });
    },
    hideList() {
      this.fold = true;
    },
    pay() {
      if (this.totalPrice &lt; this.minPrice) {
        return;
      }
      window.alert(`支付${this.totalPrice}元`);
    }
  },
  components: {
    cartcontrol
  }
}
</code></pre><ul>
<li>购物车列表的显示和隐藏(折叠)是通过数据fold来决定的,他是通过计算属性listshow来实现的,这样达到了不用操作dom就可以改变dom行为的效果,vue的数据驱动设计.</li>
</ul>
<ul>
<li>清空按钮也是这样实现的,通过批量设置count属性来实现</li>
</ul>
<ul>
<li>抛物线小球部分参考:关于购物车添加按钮的动画</li>
</ul>
<ul>
<li>因为打开shopcart详情页会出现两个内容:</li>
</ul>
<pre><code>- shopcart-list部分参考:八.shopcart-list购物车详情页


- cartcontrol部分参考:cartcontrol.vue购物车操作按钮


- 又因为这个cartcontrol是有几个地方都需要用到的,所以将其组件化处理
</code></pre><h2 id="css代码"><a href="#css代码" class="headerlink" title="css代码"></a>css代码</h2><pre><code>  @import &quot;../../common/stylus/mixin.styl&quot;

  .shopcart
    position: fixed //这是固定在页面底部的购物车栏目
    left: 0
    bottom: 0
    z-index: 50 
    width: 100%
    height: 48px
    .content
      display: flex //flex布局
      background: #141d27
      font-size: 0
      .content-left
        flex: 1
        .logo-wrapper
          display: inline-block
          position: relative
          top: -10px //因为要凸出购物车栏目一点点,设计需要
          margin: 0 12px
          padding: 6px
          width: 56px //因为使用了border-box的关系,可以直接写设计的尺寸
          height: 56px
          box-sizing: border-box //border-box可以省去计算border和内边距
          vertical-align: top
          border-radius: 50%
          background: #141d27
          .logo
            width: 100%
            height: 100%
            border-radius: 50%
            text-align: center
            background: #2b343c
            &amp;.highlight
              background: rgb(0, 160, 220)
            .icon-shopping_cart
              line-height: 44px
              font-size: 24px
              color: #80858a
              &amp;.highlight
                color: #ffffff
          .num
            position: absolute
            top: 0
            right: 0
            width: 24px
            height: 16px
            line-height: 16px
            text-align: center
            border-radius: 16px
            font-size: 9px
            color: #ffffff
            background: rgb(240, 20, 20)
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.4)
        .price
          display: inline-block
          vertical-align: top
          margin-top: 12px
          line-height: 24px
          padding-right: 12px
          box-sizing: border-box
          border-right: 1px solid rgba(255, 255, 255, 0.1)
          font-size: 16px
          font-weight: 700
          color: rgba(255, 255, 255, 0.4)
          &amp;.highlight
            color: #ffffff
        .desc
          display: inline-block
          vertical-align: top
          margin: 12px 0 0 12px
          line-height: 24px
          color: rgba(255, 255, 255, 0.4)
          font-size: 10px
      .content-right
        flex: 0 0 105px //flex布局固定右边空间
        width: 105px
        .pay
          height: 48px
          line-height: 48px
          text-align: center
          font-size: 12px
          color: rgba(255, 255, 255, 0.4)
          font-weight: 700
          &amp;.not-enough
            background: #2b333b
          &amp;.enough
            background: #00b43c
            color: #ffffff
//省略了小球动画的css
</code></pre><p><img src="http://oncweb6po.bkt.clouddn.com/3093843777-590c3740aebd9_articlex.png" alt=""></p>
<ul>
<li>这里主要注意border-box的使用,举例logo-wrapper</li>
</ul>
<pre><code>- 宽高都是56px,并且需要实现内边距是6px


- 不用border-box的话,就要计算图片的区域是多大,然后加上6px内边距等于56px


- 用了border-box的话,就不需要计算图片区域了,直接写56px,即使加上6px内边距也不撑大56px的区域,只会自动缩小内部图片区域的区域,实际情况就是外框区域56px,内边距6px,图片自动缩小到44px(6+44+6等于56)
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2017/09/09/评价列表ratings组件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/09/评价列表ratings组件/" itemprop="url">评价列表ratings组件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-09T17:56:41+08:00">
                2017-09-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>需要注意的是main.js里面需要取消vue-router的默认路由,src/main.js的router.replace(‘/goods’);需要去掉<br>原因是在添加了其他页面(原来路由只有一个页面goods,现在多了页面ratings)之后,在浏览器加载页面的时候:</p>
<ol>
<li>首先会先加载所有页面</li>
<li>在各个页面都在加载的过程中,会跳到默认路由</li>
<li>然后这些页面被中断了加载,导致了页面内部的一些靠dom渲染的代码无法执行,例如bs-scroll</li>
<li>所以会出现一些报错,TypeError: Cannot read property ‘children’ of undefined<br>所以要做默认路由的时候,直接用url做,不用vue-router自己去跳转,直接写第一个url的地址</li>
</ol>
</blockquote>
<h2 id="主体框架"><a href="#主体框架" class="headerlink" title="主体框架"></a>主体框架</h2><pre><code>&lt;div class=&quot;ratings&quot; ref=&quot;ratings&quot;&gt;
 &lt;div class=&quot;overview&quot;&gt;

 &lt;/div&gt;
&lt;!--里面是所有的内容--&gt;
&lt;/div&gt;
</code></pre><ul>
<li>需要加一个ref,为了让bscroll可以初始化dom</li>
</ul>
<h2 id="ratings内容"><a href="#ratings内容" class="headerlink" title="ratings内容"></a>ratings内容</h2><h3 id="html代码"><a href="#html代码" class="headerlink" title="html代码"></a>html代码</h3><pre><code>&lt;div class=&quot;ratings-content&quot;&gt;
      &lt;div class=&quot;overview&quot;&gt;
        &lt;div class=&quot;overview-left&quot;&gt;
          &lt;h1 class=&quot;score&quot;&gt;{{seller.score}}&lt;/h1&gt;
          &lt;div class=&quot;title&quot;&gt;综合评分&lt;/div&gt;
          &lt;div class=&quot;rank&quot;&gt;高于周边商家{{seller.rankRate}}%&lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;overview-right&quot;&gt;
        &lt;!--三个一样的模块,服务态度,商品评分,送达时间--&gt;
          &lt;div class=&quot;score-wrapper&quot;&gt;
            &lt;span class=&quot;title&quot;&gt;服务态度&lt;/span&gt;
            &lt;!--引入了star组件--&gt;
            &lt;star :size=&quot;36&quot; :score=&quot;seller.serviceScore&quot;&gt;&lt;/star&gt;
            &lt;span class=&quot;score&quot;&gt;{{seller.serviceScore}}&lt;/span&gt;
          &lt;/div&gt;
          &lt;div class=&quot;score-wrapper&quot;&gt;
            &lt;span class=&quot;title&quot;&gt;商品评分&lt;/span&gt;
            &lt;star :size=&quot;36&quot; :score=&quot;seller.foodScore&quot;&gt;&lt;/star&gt;
            &lt;span class=&quot;score&quot;&gt;{{seller.foodScore}}&lt;/span&gt;
          &lt;/div&gt;
          &lt;div class=&quot;delivery-wrapper&quot;&gt;
            &lt;span class=&quot;title&quot;&gt;送达时间&lt;/span&gt;
            &lt;span class=&quot;delivery&quot;&gt;{{seller.deliveryTime}}分钟&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
&lt;/div&gt;
</code></pre><ul>
<li>三个一样的模块共用一套样式代码,分别代入不同的数据</li>
</ul>
<ul>
<li>这里的数据都是获取seller的数据,是父组件传入的props</li>
</ul>
<h3 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a>js代码</h3><pre><code>import star from &apos;../star/star&apos;;

export default {
  props: {
    seller: {
      type: Object
    }
  },
  components: {
    star
  }
};
</code></pre><h3 id="css代码"><a href="#css代码" class="headerlink" title="css代码"></a>css代码</h3><pre><code>.ratings
  position: absolute
  top: 174px //留空一部分,给header使用
  bottom: 0
  left: 0
  width: 100%
  overflow: hidden
  .overview
    display: flex
    padding: 18px 0
    .overview-left
      flex: 0 0 137px //flex布局,固定左边,右边自动适配
      padding: 6px 0
      width: 137px
      border-right: 1px solid rgba(7, 17, 27, 0.1)
      text-align: center
      @media only screen and (max-width: 320px) //适配i5屏幕
        flex: 0 0 120px //适配的flex数值可以从根据设计稿计算
        width: 120px
      .score
        margin-bottom: 6px
        line-height: 28px
        font-size: 24px
        color: rgb(255, 153, 0)
      .title
        margin-bottom: 8px
        line-height: 12px
        font-size: 12px
        color: rgb(7, 17, 27)
      .rank
        line-height: 10px
        font-size: 10px
        color: rgb(147, 153, 159)
    .overview-right
      flex: 1 //flex布局,固定左边,右边自动适配
      padding: 6px 0 6px 24px
      @media only screen and (max-width: 320px) //适配i5屏幕
        padding-left: 6px
      .score-wrapper //三个一样的模块的共用样式
        margin-bottom: 8px
        font-size: 0
        .title
          display: inline-block
          line-height: 18px //针对模块内部的元素的对齐行,所以需要写到内部元素里面去
          vertical-align: top 
          font-size: 12px
          color: rgb(7, 17, 27)
        .star
          display: inline-block
          margin: 0 12px
          vertical-align: top
        .score
          display: inline-block
          line-height: 18px
          vertical-align: top
          font-size: 12px
          color: rgb(255, 153, 0)
      .delivery-wrapper
        font-size: 0
        .title
          line-height: 18px
          font-size: 12px
          color: rgb(7, 17, 27)
        .delivery
          margin-left: 12px
          font-size: 12px
          color: rgb(147, 153, 159)
</code></pre><ul>
<li>关于适配iphone5,因为设计稿是以iphone6为模板设计的,如果不适配一些小的屏幕的话,对于一些比较宽的div(例如overview-left,overview-right)就会出现换行,被挤压的显示清空,所以需要使用media query来做一些基本的适配,这里只是以iphone5为适配参考,具体做法就是针对不同的屏幕宽度做处理</li>
</ul>
<h2 id="ratingselect组件"><a href="#ratingselect组件" class="headerlink" title="ratingselect组件"></a>ratingselect组件</h2><p>这个引入类似ratingselect组件</p>
<h3 id="html代码-1"><a href="#html代码-1" class="headerlink" title="html代码"></a>html代码</h3><pre><code>&lt;!--引入split组件--&gt;
&lt;split&gt;&lt;/split&gt;
&lt;!-- 引入ratingselect组件 --&gt;
      &lt;ratingselect @select=&quot;selectRating&quot; @toggle=&quot;toggleContent&quot; :selectType=&quot;selectType&quot; :onlyContent=&quot;onlyContent&quot;
                    :ratings=&quot;ratings&quot;&gt;&lt;/ratingselect&gt;
</code></pre><h2 id="ratings列表"><a href="#ratings列表" class="headerlink" title="ratings列表"></a>ratings列表</h2><h3 id="html代码-2"><a href="#html代码-2" class="headerlink" title="html代码"></a>html代码</h3><pre><code>&lt;div class=&quot;rating-wrapper&quot;&gt;
        &lt;ul&gt;
        &lt;!--使用needShow方法控制显示--&gt;
          &lt;li v-for=&quot;rating in ratings&quot; v-show=&quot;needShow(rating.rateType, rating.text)&quot; class=&quot;rating-item&quot;&gt;
            &lt;div class=&quot;avatar&quot;&gt;
              &lt;img width=&quot;28&quot; height=&quot;28&quot; :src=&quot;rating.avatar&quot;&gt;
            &lt;/div&gt;
            &lt;div class=&quot;content&quot;&gt;
              &lt;h1 class=&quot;name&quot;&gt;{{rating.username}}&lt;/h1&gt;
              &lt;div class=&quot;star-wrapper&quot;&gt;
              &lt;!--引入star组件--&gt;
                &lt;star :size=&quot;24&quot; :score=&quot;rating.score&quot;&gt;&lt;/star&gt;
                &lt;span class=&quot;delivery&quot; v-show=&quot;rating.deliveryTime&quot;&gt;{{rating.deliveryTime}}&lt;/span&gt;
              &lt;/div&gt;
              &lt;p class=&quot;text&quot;&gt;{{rating.text}}&lt;/p&gt;
              &lt;!--recommend的处理,尤其注意class跟布局的使用--&gt;
              &lt;div class=&quot;recommend&quot; v-show=&quot;rating.recommend &amp;&amp; rating.recommend.length&quot;&gt;
                &lt;span class=&quot;icon-thumb_up&quot;&gt;&lt;/span&gt;
                &lt;span class=&quot;item&quot; v-for=&quot;item in rating.recommend&quot;&gt;{{item}}&lt;/span&gt;
              &lt;/div&gt;
              &lt;!--过滤时间格式--&gt;
              &lt;div class=&quot;time&quot;&gt;
                {{rating.rateTime | formatDate}}
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
&lt;/div&gt;
</code></pre><ul>
<li>需要注意recommend的布局处理</li>
</ul>
<ul>
<li>needShow和过滤时间类似food.vue组件里面使用九.商品详情页food.vue</li>
</ul>
<h3 id="js代码-1"><a href="#js代码-1" class="headerlink" title="js代码"></a>js代码</h3><pre><code>import BScroll from &apos;better-scroll&apos;;
import { formatDate } from &apos;../../common/js/date&apos;; //相对路径导入
import star from &apos;../star/star&apos;;

const ALL = 2; //设置常量,比较好的代码风格,代替直接写数字到代码里面去
const ERR_OK = 0;

export default {
  props: {
    seller: {
      type: Object
    }
  },
  data() {
    return {
      ratings: []
    };
  },
  created() { //初始化数据,从api那里获取
    this.$http.get(&apos;/api/ratings&apos;).then((response) =&gt; {
      response = response.body;
      if (response.errno === ERR_OK) {
        this.ratings = response.data;
        this.$nextTick(() =&gt; { //异步初始化滚动
          this.scroll = new BScroll(this.$refs.ratings, {
            click: true
          });
        });
      }
    });
  },
  methods: {
    needShow(type, text) { //控制显示是否有内容的rate
      if (this.onlyContent &amp;&amp; !text) {
        return false;
      }
      if (this.selectType === ALL) {
        return true;
      } else {
        return type === this.selectType;
      }
    }
  },
  filters: { //过滤时间
    formatDate(time) {
      let date = new Date(time);
      return formatDate(date, &apos;yyyy-MM-dd hh:mm&apos;);
    }
  },
  components: {
    star
  }
};
</code></pre><h3 id="css代码-1"><a href="#css代码-1" class="headerlink" title="css代码"></a>css代码</h3><pre><code>@import &quot;../../common/stylus/mixin.styl&quot;

    .rating-wrapper
      padding: 0 18px
      .rating-item
        display: flex //使用flex布局
        padding: 18px 0
        border-1px(rgba(7, 17, 27, 0.1))
        .avatar
          flex: 0 0 28px //使用flex布局
          width: 28px
          margin-right: 12px
          img
            border-radius: 50%
        .content
          position: relative //重新定义相对布局的参考父div,被内部元素做绝对布局使用
          flex: 1 //使用flex布局
          .name
            margin-bottom: 4px
            line-height: 12px
            font-size: 10px
            color: rgb(7, 17, 27)
          .star-wrapper
            margin-bottom: 6px
            font-size: 0
            .star
              display: inline-block
              margin-right: 6px
              vertical-align: top
            .delivery
              display: inline-block
              vertical-align: top
              line-height: 12px
              font-size: 10px
              color: rgb(147, 153, 159)
          .text
            margin-bottom: 8px
            line-height: 18px
            color: rgb(7, 17, 27)
            font-size: 12px
          .recommend
            line-height: 16px
            font-size: 0
            .icon-thumb_up, .item //共有属性
              display: inline-block
              margin: 0 8px 4px 0 //分配右外边距和下外边距
              font-size: 9px
            .icon-thumb_up //个别属性,因为icon没有颜色,需要配置
              color: rgb(0, 160, 220)
            .item //个别属性
              padding: 0 6px //设置左右内边距,撑开布局,形成类似button的效果
              border: 1px solid rgba(7, 17, 27, 0.1)
              border-radius: 1px
              color: rgb(147, 153, 159)
              background: #fff
          .time
            position: absolute
            top: 0
            right: 0
            line-height: 12px
            font-size: 10px
            color: rgb(147, 153, 159)
</code></pre><ul>
<li>这里的flex布局是左边固定28px,然后右边占满剩下的空间</li>
</ul>
<pre><code>- flex: 0 0 28px 是flex-grow为0(项目不放大比例),flex-shrink为0(项目不缩小比例),flex-basis为28px(固定占用28px)


- flex: 1是flex 1 1 auto的缩写,就是会放大项目比例,并且剩余的项目空间也占有
参考:Flex 布局教程：语法篇
</code></pre><ul>
<li>针对recommend的布局:</li>
</ul>
<pre><code>- 每一个内容都是一个span,span是行内元素,可以并列一行


- 设置外边距是为了span之间能够形成独立的间隙


- 设置内边距是为了让span和文字形成button的效果
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2017/09/09/学会使用box-sizing布局/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/09/学会使用box-sizing布局/" itemprop="url">学会使用box-sizing布局</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-09T17:56:26+08:00">
                2017-09-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h2><ul>
<li>关于CSS重要的一个概念就是CSS盒子模型。它控制着页面这些元素的高度和宽度。盒子模型多少会让人产生一些困惑，尤其当涉及到高度和宽度计算的时候。真正盒子的宽度(在页面呈现出来的宽度)和高度，需要加上一些其它的属性，例如：</li>
</ul>
<pre><code>- padding + border + width= 盒子的宽度


- padding+ border + height = 盒子的高度
</code></pre><ul>
<li>这看起来并不是那么直观，那么我们看一个图：</li>
</ul>
<p><img src="http://oncweb6po.bkt.clouddn.com/1480597-fa20b7741a01637b.png" alt=""></p>
<ul>
<li>这意味着，如果我们设置一个宽度为200px，而实际呈现的盒子的宽度可能会大于200px(除非没有左右边框和左右补白)。这可能看起来比较怪，CSS设置的宽度仅仅是内容区的宽度，而非盒子的宽度。同样，高度类似</li>
</ul>
<ul>
<li>这导致的直接结果是当我们希望页面呈现的盒子的宽度是200px的时候，我们需要减去它的左右边框和左右补白，然后设置为对应的CSS宽度。例如上图，我们设置希望盒子宽度为200px，则需要先减去左右补白各20px，左右边框各1px，然后设置对应的CSS宽度158px。</li>
</ul>
<ul>
<li>幸运的是，我们有更好的方法达到我们想要的目的</li>
</ul>
<h2 id="box-sizing"><a href="#box-sizing" class="headerlink" title="box-sizing"></a>box-sizing</h2><ul>
<li><p>语法：box-sizing:  content-box | border-box | inherit;</p>
</li>
<li><p>与上面不同的是，当你设置box-sizing:border-box以后，这就能达到你想要的目的。例如，上面我们想要一个宽度为200px的盒子，那么我们直接设置宽度为200px。是不是看起来清晰多了。当再设置它的左右边框和左右补白后，它的内容区会自动调整。这可能更直接和一目了然。CSS代码如下：</p>
<pre><code>div {
    box-sizing: border-box;
    width: 200px;
    padding: 20px;
    border: 1px solid #DDD;
}
</code></pre></li>
</ul>
<p><img src="http://oncweb6po.bkt.clouddn.com/1480597-fa20b7741a01637b.png" alt=""></p>
<ul>
<li>实际上，这更被设计者和开发者推崇</li>
</ul>
<ul>
<li>一些开发人员觉得box-sizing使用起来十分方便,所以他们主张通过通用选择器将这个属性应用于每个元素</li>
</ul>
<ul>
<li><p>但这样的观点未免有些偏激,而且还会导致不必要的困难,所以更好的方法是只在实际需要时才使用这个属性</p>
<pre><code>*{
     margin:0;
      padding:0;
     box-sizing:border-box;
}
</code></pre></li>
</ul>
<ul>
<li></li>
<li>写上 box-sizing: border-box; ，设置padding值 也不用担心没有减小宽度值而变形</li>
</ul>
<h2 id="box-sizing其它的值"><a href="#box-sizing其它的值" class="headerlink" title="box-sizing其它的值"></a>box-sizing其它的值</h2><ul>
<li>content-box</li>
</ul>
<pre><code>- 描述：在宽度和高度之外绘制元素的内边距和边框。
</code></pre><p><img src="http://oncweb6po.bkt.clouddn.com/1480597-707e492f1498ffd6.png" alt=""></p>
<ul>
<li>border-box</li>
</ul>
<pre><code>- 描述：为元素指定的任何内边距和边框都将在已设定的宽度和高度内进行绘制
</code></pre><p><img src="http://oncweb6po.bkt.clouddn.com/1480597-0d0c50a7d16e7164.png" alt=""></p>
<ul>
<li>inherit</li>
</ul>
<pre><code>- 描述：继承 父元素 box-sizing属性的值
</code></pre><h2 id="浏览器兼容性"><a href="#浏览器兼容性" class="headerlink" title="浏览器兼容性"></a>浏览器兼容性</h2><ul>
<li><p>IE8及以上版本支持该属性，Firefox 需要加上浏览器厂商前缀-moz-，对于低版本的IOS和Android浏览器也需要加上-webkit-。实际上，很多reset.css或者normal.css里都包含如下CSS语句，也是比较赞成的用法：</p>
<pre><code>*, *:before, *:after {
　　-moz-box-sizing: border-box;
　　-webkit-box-sizing: border-box;
　　box-sizing: border-box;
　　}
</code></pre></li>
</ul>
<h2 id="box-sizing-布局三栏目案例"><a href="#box-sizing-布局三栏目案例" class="headerlink" title="box-sizing 布局三栏目案例"></a>box-sizing 布局三栏目案例</h2><pre><code>div{
        height:700px;
        float:left;
}
div.left{
        width:25%;
        background:red;
}
div.cent{
        width:50%;
        box-sizing:border-box;/*可以改变元素以使其宽度包含填充*/
                /* 现在整个元素,包括填充在内,占页面总宽度的50%,所以元素的组合宽度为100%,这全程它们很好地适应于它们的容器.*/
        background:yellow;
        padding:0 20px;/*加了这个会使盒子内容溢出 但是box-sizing很好的自适应了*/
}
div.right{
       width:25%;
        background:blue;
}
&lt;div class=&quot;left&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;cent&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;right&quot;&gt;&lt;/div&gt;
</code></pre><ul>
<li>效果</li>
</ul>
<p><img src="http://oncweb6po.bkt.clouddn.com/1480597-fc7077a82856048c.png" alt=""></p>
<p><img src="http://oncweb6po.bkt.clouddn.com/1480597-446074af9d0ce792.png" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2017/09/09/ratingselect组件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/09/ratingselect组件/" itemprop="url">ratingselect组件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-09T17:56:08+08:00">
                2017-09-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://oncweb6po.bkt.clouddn.com/1191015493-590c3b179b4c9_articlex.png" alt=""></p>
<h2 id="html代码"><a href="#html代码" class="headerlink" title="html代码"></a>html代码</h2><blockquote>
<p>备注:父组件food.vue传入的数据</p>
</blockquote>
<pre><code>&lt;ratingselect @select=&quot;selectRating&quot; @toggle=&quot;toggleContent&quot; :selectType=&quot;selectType&quot;
                    :onlyContent=&quot;onlyContent&quot; :desc=&quot;desc&quot;
                    :ratings=&quot;food.ratings&quot;&gt;&lt;/ratingselect&gt;
</code></pre><ul>
<li>方法有:@select=”selectRating” @toggle=”toggleContent”,通过将子组件的方法和父组件的方法进行关联,这样就能够实现跨组件通讯和操作</li>
</ul>
<ul>
<li>属性有::selectType=”selectType”:onlyContent=”onlyContent” :desc=”desc”:ratings=”food.ratings”,这是通过pros传入到子组件的属性,将父组件的数据传到子组件里面,也带有一种通过父组件来初始化子组件属性的意思.<br>##ratingselect的html代码<pre><code>&lt;div class=&quot;ratingselect&quot;&gt;
&lt;!--有使用一个border-1px的mixin--&gt;
  &lt;div class=&quot;rating-type border-1px&quot;&gt;
  &lt;!--绑定一个select方法控制切换,绑定class控制切换之后的按钮样式显示--&gt;
    &lt;span @click=&quot;select(2,$event)&quot; class=&quot;block positive&quot; :class=&quot;{&apos;active&apos;:selectType ===2}&quot;&gt;{{desc.all}}&lt;span
      class=&quot;count&quot;&gt;{{ratings.length}}&lt;/span&gt;&lt;/span&gt;
    &lt;span @click=&quot;select(0,$event)&quot; class=&quot;block positive&quot; :class=&quot;{&apos;active&apos;:selectType ===0}&quot;&gt;{{desc.positive}}&lt;span
      class=&quot;count&quot;&gt;{{positives.length}}&lt;/span&gt;&lt;/span&gt;
    &lt;span @click=&quot;select(1,$event)&quot; class=&quot;block negative&quot; :class=&quot;{&apos;active&apos;:selectType ===1}&quot;&gt;{{desc.negative}}&lt;span
      class=&quot;count&quot;&gt;{{negatives.length}}&lt;/span&gt;&lt;/span&gt;
  &lt;/div&gt;
  &lt;!--绑定一个toggleContent方法来控制有内容和无内容的显示--&gt;
  &lt;div @click=&quot;toggleContent&quot; class=&quot;switch&quot; :class=&quot;{&apos;on&apos;:onlyContent}&quot;&gt;
    &lt;span class=&quot;icon-check_circle&quot;&gt;&lt;/span&gt;
    &lt;span class=&quot;text&quot;&gt;只看有内容的评价&lt;/span&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre></li>
</ul>
<ul>
<li>@click=”select(2,$event)” select方法传入类型和事件,然后在methods里面调用父组件的方法,实现子组件控制父组件的目的</li>
</ul>
<ul>
<li>:class=”{‘active’:selectType ===2}” 根据类型来确定显示的class,实现不同类型显示不同样式的目的</li>
</ul>
<ul>
<li>positives.length 使用计算属性自动计算类型数组的长度,用来显示不同类型的数量</li>
</ul>
<ul>
<li>@click=”toggleContent” :class=”{‘on’:onlyContent}”</li>
</ul>
<pre><code>- toggleContent控制是否展示有内容的rate,也是在methods里面调用父组件的方法,实现子组件控制父组件的目的


- 绑定on这个class来控制该按钮的样式
</code></pre><h2 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a>js代码</h2><pre><code>const POSITIVE = 0; //设置显示常量
const NEGATIVE = 1;
const ALL = 2;

export default{
  props: {
    ratings: { //传入ratings数组,跟food.ratings关联
      type: Array,
      default(){
        return [];
      }
    },
    selectType: { //跟selectType关联,通过在父组件里面设置这3个值来实现控制子组件的操作
      type: Number,
      default: ALL
    },
    onlyContent: { //跟onlyContent关联
      type: Boolean,
      default: true
    },
    desc: { //跟desc关联
      type: Object,
      default(){
        return {
          all: &apos;全部&apos;,
          positive: &apos;满意&apos;,
          negative: &apos;不满意&apos;
        }
      }
    }
  },
  computed: {
    positives(){ //自动过滤rateType(正向的rate)
      return this.ratings.filter((rating) =&gt; { //js的filter函数会返回一个处理后的(为true)结果的结果数组
        return rating.rateType === POSITIVE;
      })
    },
    negatives(){ //自动过滤rateType(反向的rate)
      return this.ratings.filter((rating) =&gt; {
        return rating.rateType === NEGATIVE;
      })
    }
  },
  methods: {
    select(type, event) { //选择rateType并且通知父组件
      if (!event._constructed) {
        return;
      }
      this.$emit(&apos;select&apos;, type); //调用父组件的方法
    },
    toggleContent(event) { //选择是否显示有内容的rate,并且通知父组件
      if (!event._constructed) {
        return;
      }
      this.$emit(&apos;toggle&apos;);
    }
  }
}
</code></pre><h2 id="css代码"><a href="#css代码" class="headerlink" title="css代码"></a>css代码</h2><pre><code>@import &quot;../../common/stylus/mixin.styl&quot;

.ratingselect
  .rating-type
    padding: 18px 0
    margin: 0 18px
    border-1px(rgba(7, 17, 27, 0.1)) //1像素边框的mixin
    font-size: 0 //去除行内元素间隙
    .block
      display: inline-block
      padding 8px 12px
      margin-right: 8px
      border-radius: 1px
      line-height: 16px
      font-size: 12px
      color: rgb(77, 85, 93)
      &amp;.active //被选中的按钮的class(由:class控制)
        color: #ffffff
      .count
        margin-left: 2px
        font-size: 8px
      &amp;.positive //设置支持的按钮的样式
        background: rgba(0, 160, 220, 0.2)
        &amp;.active
          background: rgb(0, 160, 220)
      &amp;.negative
        background: rgba(77, 85, 93, 0.2)
        &amp;.active
          background: rgb(77, 85, 93)
  .switch
    padding: 12px 18px
    line-height: 24px
    border-bottom: 1px solid rgba(7, 17, 27, 0.1)
    color: rgb(147, 153, 159)
    font-size: 0
    &amp;.on //on的class样式
      .icon-check_circle
        color: #00c850
    .icon-check_circle
      display: inline-block
      vertical-align: top
      margin-right: 4px
      font-size: 24px
    .text
      vertical-align: top
      font-size: 12px
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2017/09/09/vue-nextTick/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/09/vue-nextTick/" itemprop="url">vue.nextTick()</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-09T17:55:40+08:00">
                2017-09-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="什么是Vue-nextTick"><a href="#什么是Vue-nextTick" class="headerlink" title="什么是Vue.nextTick()"></a>什么是Vue.nextTick()</h3><p>官方文档解释如下：</p>
<blockquote>
<p>在下次 DOM 更新循环结束之后执行延迟回调。在修改数据之后立即使用这个方法，获取更新后的 DOM。</p>
</blockquote>
<p>我理解的官方文档的这句话的侧重点在最后那半句获取更新后的DOM，获取更新后的DOM言外之意就是什么操作需要用到了更新后的DOM而不能使用之前的DOM或者使用更新前的DOM或出问题，所以就衍生出了这个获取更新后的DOM的Vue方法。所以放在Vue.nextTick()回调函数中的执行的应该是会对DOM进行操作的 js代码，比如Swiper扩展包的</p>
<pre><code>var swiper = new Swiper(&apos;.swiper-container&apos;, {
                    pagination: &apos;.swiper-pagination&apos;,
                    nextButton: &apos;.swiper-button-next&apos;,
                    prevButton: &apos;.swiper-button-prev&apos;,
                    paginationClickable: true,
                    spaceBetween: 30,
                    centeredSlides: true,
                    autoplay: 2500,
                    autoplayDisableOnInteraction: false
                });
</code></pre><h3 id="什么时候需要用的Vue-nextTick"><a href="#什么时候需要用的Vue-nextTick" class="headerlink" title="什么时候需要用的Vue.nextTick()"></a>什么时候需要用的Vue.nextTick()</h3><ul>
<li>你在Vue生命周期的created()钩子函数进行的DOM操作一定要放在Vue.nextTick()的回调函数中。原因是什么呢，原因是在created()钩子函数执行的时候DOM 其实并未进行任何渲染，而此时进行DOM操作无异于徒劳，所以此处一定要将DOM操作的js代码放进Vue.nextTick()的回调函数中。与之对应的就是mounted钩子函数，因为该钩子函数执行时所有的DOM挂载和渲染都已完成，此时在该钩子函数中进行任何DOM操作都不会有问题 。</li>
</ul>
<ul>
<li>在数据变化后要执行的某个操作，而这个操作需要使用随数据改变而改变的DOM结构的时候，这个操作都应该放进Vue.nextTick()的回调函数中。</li>
</ul>
<p>原因是，Vue是异步执行dom更新的，一旦观察到数据变化，Vue就会开启一个队列，然后把在同一个事件循环 (event loop) 当中观察到数据变化的 watcher 推送进这个队列。如果这个watcher被触发多次，只会被推送到队列一次。这种缓冲行为可以有效的去掉重复数据造成的不必要的计算和DOm操作。而在下一个事件循环时，Vue会清空队列，并进行必要的DOM更新。</p>
<p>当你设置 vm.someData = ‘new value’，DOM 并不会马上更新，而是在异步队列被清除，也就是下一个事件循环开始时执行更新时才会进行必要的DOM更新。如果此时你想要根据更新的 DOM 状态去做某些事情，就会出现问题。。为了在数据变化之后等待 Vue 完成更新 DOM ，可以在数据变化之后立即使用 Vue.nextTick(callback) 。这样回调函数在 DOM 更新完成后就会调用。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2017/09/09/vue过渡动画/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/09/vue过渡动画/" itemprop="url">vue过渡动画</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-09T17:55:24+08:00">
                2017-09-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在vue中，实现过渡动画一般是下面这样:</p>
<pre><code>&lt;transition name=&quot;fade&quot;&gt;
    &lt;div&gt;&lt;/div&gt;
&lt;/transition&gt;
</code></pre><p>用一个transition对元素或者组件进行封装.<br>在过渡的时候，会有 4 个(CSS)类名在 enter/leave 的过渡中切换。</p>
<ul>
<li>v-enter: 定义进入过渡的开始状态。在元素被插入时生效，在下一个帧移除。</li>
</ul>
<ul>
<li>v-enter-active: 定义进入过渡的结束状态。在元素被插入时生效，在 transition/animation 完成之后移除。</li>
</ul>
<ul>
<li>v-leave: 定义离开过渡的开始状态。在离开过渡被触发时生效，在下一个帧移除。</li>
</ul>
<ul>
<li>v-leave-active: 定义离开过渡的结束状态。在离开过渡被触发时生效，在 transition/animation 完成之后移除。</li>
</ul>
<p>上面是官方文档的原话，但是这4个类名如何运用呢？下面看个例子</p>
<pre><code>&lt;transition name=&quot;fold&quot;&gt;
    &lt;div v-show=&quot;show&quot; class=&quot;example&quot;&gt;&lt;/div&gt;
&lt;/transition&gt;

css:
.example {
    width: 100px;
    height: 100px;
    transform: translate3d(0, -100px, 0);
}
.fold-enter-active, .fold-leave-active {
    transition: all .5s;
}
.fold-enter, .fold-leave-active {
    transform: translate3d(0, 0, 0);
}
</code></pre><blockquote>
<p>当show = true时:</p>
<p>这里的fold-enter，是在元素显示的一瞬间被加入，然后瞬间被移除，在上面的例子中，example这个块状元素本来因为有了transform: translate3d(0, -100px, 0)这个样式，所以被上移了100px,但是因为fold-enter，所以将example这个块状元素移到了原位，但是fold-enter因为瞬间就被移除掉了，所以这时候的元素的样式又变成了transform: translate3d(0, -100px, 0),但是这时候fold-enter-active这个样式就生效了，因为设置了transition: all .5s,所以元素会在0.5s的时间内上移100px,在过渡动画结束之后,fold-enter-active这个类马上被移除.</p>
<p>当show = false时:</p>
<p>example不会马上消失，这个时候fold-leave-active这个类就起作用了,example这时的位置是在-100px，fold-leave-active定义的是过渡的结束状态：transform: translate3d(0, 0, 0);，但是同时又设置了transition: all .5s，所以这时元素会在0.5s的时间内下移100px.之后fold-leave-active被移除.</p>
</blockquote>
<p>另外，还可以在动画中调用js钩子函数:</p>
<pre><code>&lt;transition
  v-on:before-enter=&quot;beforeEnter&quot;
  v-on:enter=&quot;enter&quot;
  v-on:after-enter=&quot;afterEnter&quot;
  v-on:enter-cancelled=&quot;enterCancelled&quot;
  v-on:before-leave=&quot;beforeLeave&quot;
  v-on:leave=&quot;leave&quot;
  v-on:after-leave=&quot;afterLeave&quot;
  v-on:leave-cancelled=&quot;leaveCancelled&quot;
&gt;
&lt;/transition&gt;
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2017/09/09/vue的v-if与v-show/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/09/vue的v-if与v-show/" itemprop="url">vue的v-if与v-show</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-09T17:55:02+08:00">
                2017-09-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-共同点"><a href="#1-共同点" class="headerlink" title="1.共同点"></a>1.共同点</h3><p>都是动态显示DOM元素</p>
<h3 id="2-区别"><a href="#2-区别" class="headerlink" title="2.区别"></a>2.区别</h3><p>（1）手段：v-if是动态的向DOM树内添加或者删除DOM元素；v-show是通过设置DOM元素的display样式属性控制显隐；</p>
<p>（2）编译过程：v-if切换有一个局部编译/卸载的过程，切换过程中合适地销毁和重建内部的事件监听和子组件；v-show只是简单的基于css切换；</p>
<p>（3）编译条件：v-if是惰性的，如果初始条件为假，则什么也不做；只有在条件第一次变为真时才开始局部编译（编译被缓存？编译被缓存后，然后再切换的时候进行局部卸载); v-show是在任何条件下（首次条件是否为真）都被编译，然后被缓存，而且DOM元素保留；</p>
<p>（4）性能消耗：v-if有更高的切换消耗；v-show有更高的初始渲染消耗；</p>
<p>（5）使用场景：v-if适合运营条件不大可能改变；v-show适合频繁切换。</p>
<h3 id="Tips："><a href="#Tips：" class="headerlink" title="Tips："></a>Tips：</h3><p>（1）如果v-show作用的元素，css文件中display:none，通过v-show进行设置不能显示该元素；<br>原因：v-show控制显隐，是通过js代码去修改元素的element style，如果value为false，设置display: none;如果value为true，设置display: ‘’；于是value为true时，只能将element style中的display效果清除，并不能覆盖css中的display效果；<br>如下图所示，value=true时，v-show改变的是element.style，由于无效，显示效果由css文件中的display决定。</p>
<p><img src="http://oncweb6po.bkt.clouddn.com/605230-20160422103435320-1044614315.png" alt=""></p>
<h3 id="解决办法："><a href="#解决办法：" class="headerlink" title="解决办法："></a>解决办法：</h3><p>使用v-show的话，在vue解析之前隐藏DOM的话，尽量在style属性里面设置display的值，不要在css文件中。</p>
<pre><code>&lt;ul v-touch:tap=&quot;message=2&quot; style=&quot;display: none&quot; v-show=&quot;show&quot;&gt;
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2017/09/09/shopcart-list购物车列表页/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/09/shopcart-list购物车列表页/" itemprop="url">shopcart-list购物车列表页</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-09T17:54:36+08:00">
                2017-09-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>需要使用better-scroll进行列表内容滚动绑定</li>
</ul>
<ul>
<li>使用vue2的transition动画过渡处理动画</li>
</ul>
<ul>
<li><p>使用子组件cartcontrol处理购物车的添加删除操作cartcontrol.vue购物车操作按钮</p>
<pre><code>&lt;!--transition是vue2的动画格式--&gt;
&lt;transition name=&quot;fold&quot;&gt; 
    &lt;div class=&quot;shopcart-list&quot; v-show=&quot;listShow&quot;&gt;
        &lt;div class=&quot;list-header&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;list-content&quot; ref=&quot;listContent&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/transition&gt;
</code></pre></li>
</ul>
<h2 id="购物车详情内容shopcart-list"><a href="#购物车详情内容shopcart-list" class="headerlink" title="购物车详情内容shopcart-list"></a>购物车详情内容shopcart-list</h2><p>一共有两块,list-header,list-content,这是根据设计稿内容确定的</p>
<h3 id="list-header"><a href="#list-header" class="headerlink" title="list-header"></a>list-header</h3><p>绑定清空按钮</p>
<pre><code>&lt;div class=&quot;list-header&quot;&gt;
            &lt;h1 class=&quot;title&quot;&gt;购物车&lt;/h1&gt;
            &lt;!--绑定empty方法清空购物车内容--&gt;
            &lt;span class=&quot;empty&quot; @click=&quot;empty&quot;&gt;清空&lt;/span&gt;
&lt;/div&gt;
</code></pre><p>通过设置selectFoods里面所有数据的count为0来实现清空的目的</p>
<pre><code>empty() { //清空购物车内容
        this.selectFoods.forEach((food) =&gt; {
          food.count = 0;
        });
      },
</code></pre><h3 id="list-content"><a href="#list-content" class="headerlink" title="list-content"></a>list-content</h3><p>这里也分开两部分来说:</p>
<p>第一部分:</p>
<ul>
<li>使用ref来绑定一个dom,然后被vue使用,ref=”listContent”,这是为了将list-content的dom被使用,然后实例化better-scroll实现滚动list的效果</li>
</ul>
<ul>
<li>购物车的清单是通过遍历selectFoods数组(通过父组件goods处理并传入goods.vue)得到的,v-for=”food in selectFoods”</li>
</ul>
<ul>
<li>shopcart-list本身也有一个渐入渐出的动画</li>
</ul>
<ul>
<li>list-content本身没有高度,是靠header和content撑开</li>
</ul>
<p>第二部分:</p>
<ul>
<li>复用子组件cartcontrol,因为这个子组件在购物车内容和购物车详情页的列表里都有使用,所以单独独立出来,复用代码 <cartcontrol @add="addFood" :food="food"></cartcontrol></li>
</ul>
<ul>
<li>子组件cartcontrol会有2个动画,一个动画是他自己本身的水平滚动,一个是动画是要跟shopcart关联的抛物线滚动cartcontrol.vue购物车操作按钮</li>
<li><p>代码部分:<br>html代码</p>
<pre><code>&lt;!--ref是用来给better-scroll绑定的dom--&gt;
&lt;div class=&quot;list-content&quot; ref=&quot;listContent&quot;&gt;
  &lt;ul&gt;
  &lt;!--遍历selectFoods获得被勾选的所有数据--&gt;
    &lt;li class=&quot;food&quot; v-for=&quot;food in selectFoods&quot;&gt;
      &lt;span class=&quot;name&quot;&gt;{{food.name}}&lt;/span&gt;
      &lt;div class=&quot;price&quot;&gt;
        &lt;span&gt;￥{{food.price * food.count}}&lt;/span&gt;
      &lt;/div&gt;
      &lt;!--购物车详情列表里面的购物车按钮组件cartcontrol--&gt;
      &lt;div class=&quot;cartcontrol-wrapper&quot;&gt;
        &lt;cartcontrol @add=&quot;addFood&quot; :food=&quot;food&quot;&gt;&lt;/cartcontrol&gt;
      &lt;/div&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
</code></pre></li>
</ul>
<h3 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a>js代码</h3><pre><code>import BScroll from &apos;better-scroll&apos;; //导入better-scroll
import cartcontrol from &apos;../../components/cartcontrol/cartcontrol&apos;; //导入cartcontrol组件

export default{ //导出到当前vue文件内使用
  props: { //父组件goods传入数据
    selectFoods: { //被勾选的所有foods的数据
      type: Array, //默认值类型
      default(){ //默认值,并且vue的data数据是一个函数写法实现的
        return [
          {}
        ];
      }
    },
  },
  data(){
    return {
      fold: true // 控制购物车折叠效果的标志,默认是true代表折叠
    }
  },
  computed: {
    totalCount(){ //在这里被用来判断购物车是否有东西
      let count = 0;
      this.selectFoods.forEach((food) =&gt; {
        count += food.count;
      })
      return count;
    },
    listShow(){ //购物车是否展示内部列表处理
      if (!this.totalCount) { //判断没有数量的情况
        this.fold = true; //折叠属性设置为true,即折叠起来,主要是更新fold的状态
        return false; //返回false是给v-show使用,false会display none
      }
      let show = !this.fold; //使用fold的状态取反来实现常用的切换状态处理逻辑
       if (show) { //展示购物车列表内容
        this.$nextTick(() =&gt; { //异步处理,提高体验,防止卡顿
          if (!this.scroll) { //如果没有绑定过better-scroll就绑定一个
          //用$refs来绑定vue的dom元素
            this.scroll = new BScroll(this.$refs.listContent, {
              click: true //让better-scroll将click事件也传递
            });
          } else { //使用better-scroll的内置事件refresh直接更新绑定,不用重新实例化一次better-scroll
            this.scroll.refresh();
          }
        });
      }
      return show; //返回布尔值给v-show使用
    }
  },
  methods: {
    toggleList(){ //封装一个方法来控制购物车列表的显示
      if (!this.totalCount) {
        return;
      }
      this.fold = !this.fold; //切换状态的处理
    },
  },
  components: {
    cartcontrol //注册cartcontrol组件,以便当前vue文件能够调用
  }
</code></pre><p>css代码</p>
<pre><code>@import &quot;../../common/stylus/mixin.styl&quot;

   .shopcart-list
      position: absolute //因为需要固定在app主界面的底部(非footer)
      left: 0
      top: 0
      z-index: -1 //因为要避免遮挡footer的图标
      width: 100%
      transform: translate3d(0, -100%, 0) //设置css方式的vue动画初始值,纵坐标的-100%是指相反方向的当前元素的100%高度,这是&quot;入&quot;
      &amp;.fold-enter-active, &amp;.fold-leave-active //shopcart-list的渐入渐出动画,这是&quot;渐&quot;
        transition: all 0.5s //全部元素0.5秒过渡变化
      &amp;.fold-enter, &amp;.fold-leave-active // 这是&quot;出&quot;
        transform: translate3d(0, 0, 0) //3d变形
      .list-header
        height: 40px 
        line-height: 40px
        padding: 0 18px
        background: #f3f5f7
        border-bottom: 1px solid rgba(7, 17, 27, 0.1)
        .title
          float: left
          font-size: 14px
          color: rgb(7, 17, 27)
        .empty
          float: right
          font-size: 12px
          color: rgb(0, 160, 220)

      .list-content
        padding: 0 18px
        max-height: 217px //因为不固定高度,所以用max-height
        overflow: hidden //要实现滚动,就要隐藏超出部分
        background: #fff
        .food
          position: relative
          padding: 12px 0
          box-sizing: border-box
          border-1px(rgba(7, 17, 27, 0.1))//要处理1px边框问题,引入mixin.styl
          .name
            line-height: 24px
            font-size: 14px
            color: rgb(7, 17, 27)
          .price
            position: absolute
            right: 90px
            bottom: 12px
            line-height: 24px
            font-size: 14px
            font-weight: 700
            color: rgb(240, 20, 20)
          .cartcontrol-wrapper
            position: absolute
            right: 0
            bottom: 6px
</code></pre><h2 id="购物车遮罩list-mask"><a href="#购物车遮罩list-mask" class="headerlink" title="购物车遮罩list-mask"></a>购物车遮罩list-mask</h2><pre><code>&lt;!--购物车详情页的遮罩并且动画处理--&gt;
&lt;transition name=&quot;fade&quot;&gt;
  &lt;div class=&quot;list-mask&quot; @click=&quot;hideList&quot; v-show=&quot;listShow&quot;&gt;&lt;/div&gt;
&lt;/transition&gt;
</code></pre><hr>
<pre><code>hideList() { //遮罩隐藏
        this.fold = true;
      },
</code></pre><ul>
<li>遮罩的动画是普通的渐隐渐现,使用css3实现</li>
</ul>
<ul>
<li>只需要操作数据属性就能够实现</li>
</ul>
<ul>
<li>遮罩的层级是跟shopcart-list同级的,是因为同一层</li>
</ul>
<ul>
<li><p>遮罩触发会放到shopcart组件的content元素,使用的方法是toggleList</p>
<pre><code>.list-mask //遮罩的样式
  position: fixed
  top: 0
  left: 0
  width: 100%
  height: 100%
  z-index: 40
  backdrop-filter: blur(10px) //遮罩虚化
  opacity: 1
  background: rgba(7, 17, 27, 0.6)
  &amp;.fade-enter-active, &amp;.fade-leave-active //遮罩动画
    transition: all 0.5s
  &amp;.fade-enter, &amp;.fade-leave-active
    opacity: 0
    background: rgba(7, 17, 27, 0)
</code></pre></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2017/09/09/cartcontrol-vue购物车操作按钮/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/09/cartcontrol-vue购物车操作按钮/" itemprop="url">cartcontrol.vue购物车操作按钮</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-09T17:54:07+08:00">
                2017-09-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="html代码"><a href="#html代码" class="headerlink" title="html代码"></a>html代码</h2><p>知识点:</p>
<ul>
<li>使用了vue2的动画实现方式-transition,这里主要在css上设计来配合vue2</li>
</ul>
<ul>
<li>cartcontrol这个模块主要通过三个小模块实现,删除按钮,显示数量块,增加按钮</li>
</ul>
<ul>
<li><p>删除按钮和增加按钮都带有一个click方法,并且都有v-show来根据food的数量来控制显示,而显示数量块就只是单纯显示food的数量</p>
  <template><br>    <div class="cartcontrol"><br>    <!--外层动画--><br>      <transition name="move"><br>        <div class="cart-decrease" v-show="food.count>0" @click="decreaseCart"><br>        <!--内层动画--><br>          <span class="inner icon-remove_circle_outline"></span><br>        </div><br>      </transition><br>      <div class="cart-count" v-show="food.count>0"></div><br>      <div class="cart-add icon-add_circle" @click="addCart"></div><br>    </div><br>  </template>

</li>
</ul>
<h2 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a>js代码</h2><p>知识点:</p>
<ul>
<li>引入vue模块,因为需要使用Vue.set方法</li>
</ul>
<ul>
<li>接收来自goods.vue的food数据,然后使用</li>
</ul>
<ul>
<li>有2个方法,一个是addCart,一个是decreaseCart,分别对应html代码中的@click</li>
</ul>
<ul>
<li>addCart方法,默认会传入event原生dom事件</li>
</ul>
<pre><code>- 鉴于bsscrol插件的原因,需要return掉非bscrol的事件


- 需要注意的是这里的food并没有count属性,所需要手动设置,虽然之前goods会将有count属性的food做自动处理,但是最开始的时候,所有food都没有count属性,并且cartcontrol是最开始触发对food的count属性进行添加的(点击一次就会对count++,增加一个food)


- food数据是从父组件goods.vue传入的,所以对这个数据的修改,也能够反应到父组件,而这里使用Vue.set直接对vue的data进行对象数据写入,对food数据添加了一个count的属性,用来控制每一个food的被选中的数量,也因为shopcart.vue的数据也是从父组件goods.vue传入的,使用同一个food数据,从而关联到[shopcart.vue购物车]()的food的购买数量统计
</code></pre><ul>
<li><p>decreaseCart方法,同上</p>
<pre><code>&lt;script&gt;
  import Vue from &apos;vue&apos;;

  export default{
    props: {
      food: {
        type: Object
      }
    },
    methods: {
      addCart(event){
        if (!event._constructed) {
          return false;
        }
        if (!this.food.count) {
          Vue.set(this.food, &apos;count&apos;, 1); //遇到没有这个属性的,会强行添加一个
        } else {
          this.food.count++; 
        }
        this.$emit(&apos;add&apos;, event.target);
      },
      decreaseCart(event){
        if (!event._constructed) {
          return false;
        }
        if (this.food.count) {
          this.food.count--;
        }
      }
    }
  };
&lt;/script&gt;
</code></pre></li>
</ul>
<h2 id="css代码"><a href="#css代码" class="headerlink" title="css代码"></a>css代码</h2><p>知识点:</p>
<ul>
<li>vue2的动画</li>
</ul>
<ul>
<li>Vue 提供了 transition 的封装组件,就是之前的<transition></transition></li>
</ul>
<ul>
<li>这个动画是一个滚动淡入和淡出的效果</li>
</ul>
<ul>
<li>首先,定义了这个动画效果的名字为move(<transition name="move">),并且将需要这个效果的内容用一个dom的div包裹起来,这个效果分2层,外层和内层inner(外层和内层用class来区分,通过增加一个内层class inner来区分)</transition></li>
</ul>
<ul>
<li>然后,设置原始的动画状态(外层和内层)</li>
</ul>
<pre><code>- 外层设置了透明度为1和transform变形的3d位置


- 内层设置了滚动角度和淡入淡出效果
</code></pre><ul>
<li>然后,设置vue的动画过渡属性</li>
</ul>
<pre><code>- move-enter-active和move-leave-active


    - 这里设置匀速过渡效果是为了在动画进入过渡的结束状态和动画离开过渡的结束状态都是匀速过渡的变化效果,至于变化成什么效果需要看move-enter和move-leave-active


- move-enter和move-leave-active


    - 这里设置外层的透明度为0(内层会继承)和变形的3d位置


    - 这里设置了内层滚动角度


    - 这么做实现了动画在进入过渡后和离开过渡后都会内外层,并且会出现内层一边滚动到指定位置然后消失的效果
</code></pre><ul>
<li>font-size的使用</li>
</ul>
<pre><code>- 因为使用行内元素,所以需要通过设置font-size为0来取消间隙
</code></pre><ul>
<li><p>对于一些设计上的图标过小(操作区域太小)影响用户操作体验的情况,需要增加一个padding来实现增大操作区域的目的</p>
<pre><code>&lt;style lang=&quot;stylus&quot; rel=&quot;stylesheet/stylus&quot;&gt;
  .cartcontrol
    font-size: 0
    .cart-decrease //外层动画原始状态
      display: inline-block
      padding: 6px
      opacity: 1 
      transform: translate3d(0, 0, 0) 
      .inner //内层动画原始状态
        display: inline-block
        line-height: 24px
        font-size: 24px
        color: rgb(0, 160, 220)
        transition: all 0.4s linear 
        transform: rotate(0)
      &amp;.move-enter-active, &amp;.move-leave-active //vue动画过渡属性     
        transition: all 0.4s linear
      &amp;.move-enter, &amp;.move-leave-active //vue动画过渡属性
        opacity: 0
        transform: translate3d(24px, 0, 0)
        .inner
          transform: rotate(180deg)
    .cart-count
      display: inline-block
      vertical-align: top
      width: 12px
      padding-top: 6px
      line-height: 24px
      text-align: center
      font-size: 10px
      color: rgb(147, 153, 159)
    .cart-add
      display: inline-block
      padding: 6px
      line-height: 24px
      font-size: 24px
      color: rgb(0, 160, 220)
&lt;/style&gt;    
</code></pre></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://super-wei.xyz/2017/09/09/商品区域goods-vue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ZhangWei2222">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/person.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhangWei2222">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/09/商品区域goods-vue/" itemprop="url">商品区域goods.vue</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-09T17:53:45+08:00">
                2017-09-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="技术点"><a href="#技术点" class="headerlink" title="技术点:"></a>技术点:</h2><ul>
<li>定义了2个wrapper,分别是menu-wrapper和foods-wrapper,对应当前页面的架构,左右两边的区域</li>
</ul>
<ul>
<li>v-if和v-show的选择使用</li>
</ul>
<ul>
<li><p>v-for传递索引</p>
</li>
<li><p>vue传递原生事件$event</p>
</li>
<li><p>使用stylus的mixin处理一些border和img的问题</p>
</li>
<li><p>建立menu区域和foods区域的Y坐标对应关系,实现滚动foods区域会显示相应的menu区域,点击某个menu区域就显示某个固定的foods区域</p>
</li>
<li><p>flex布局的使用,实现foods区域的布局</p>
</li>
<li><p>技巧类:对一些需要js操作的class(但是又没有实际用途的)可以建立一个类似food-list-hook钩子类</p>
</li>
<li><p>font-size为0的技术点,处理行内元素的间隙问题</p>
</li>
<li><p>vue的$nextTick使用</p>
</li>
<li><p>vue的$refs的使用</p>
</li>
<li><p>vue的computed属性使用</p>
</li>
<li><p>vue的class绑定使用</p>
</li>
<li><p>在一些地方里面,使用table的垂直居中会很简单实现垂直居中</p>
</li>
<li><p>better-scroll的使用</p>
</li>
</ul>
<p><img src="http://oncweb6po.bkt.clouddn.com/2116342489-590b01d4d9952_articlex.png" alt=""></p>
<h2 id="html代码"><a href="#html代码" class="headerlink" title="html代码"></a>html代码</h2><pre><code>&lt;template&gt;
  &lt;div class=&quot;goods&quot;&gt;
  //第一个区域,menu区域
    &lt;div class=&quot;menu-wrapper&quot; ref=&quot;menuWrapper&quot;&gt;
      &lt;ul&gt;
      //v-for的使用,class绑定,传递原生事件
        &lt;li v-for=&quot;(item,index) in goods&quot; class=&quot;menu-item&quot; :class=&quot;{&apos;current&apos;:currentIndex === index}&quot;
            @click=&quot;selectMenu(index,$event)&quot;&gt;
          &lt;span class=&quot;text border-1px&quot;&gt;
          &lt;!--v-show使用--&gt;
            &lt;span v-show=&quot;item.type&gt;0&quot; class=&quot;icon&quot; :class=&quot;classMap[item.type]&quot;&gt;&lt;/span&gt;{{item.name}}
          &lt;/span&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
    //第二个区域 food区域
    //$refs的使用
    &lt;div class=&quot;foods-wrapper&quot; ref=&quot;foodsWrapper&quot;&gt;
      &lt;ul&gt;
      //hook钩子类的使用(food-list-hook)
        &lt;li v-for=&quot;item in goods&quot; class=&quot;food-list food-list-hook&quot;&gt;
          &lt;h1 class=&quot;title&quot;&gt;{{item.name}}&lt;/h1&gt;
          &lt;ul&gt;
            &lt;li v-for=&quot;food in item.foods&quot; class=&quot;food-item&quot;&gt;
              &lt;div class=&quot;icon&quot;&gt;
                &lt;img width=&quot;57&quot; height=&quot;57&quot; :src=&quot;food.icon&quot;&gt;
              &lt;/div&gt;
              &lt;div class=&quot;content&quot;&gt;
                &lt;h2 class=&quot;name&quot;&gt;{{food.name}}&lt;/h2&gt;
                &lt;p class=&quot;desc&quot;&gt;{{food.description}}&lt;/p&gt;
                &lt;div class=&quot;extra&quot;&gt;
                  &lt;span class=&quot;count&quot;&gt;月售{{food.sellCount}}份&lt;/span&gt;&lt;span&gt;好评率{{food.rating}}%&lt;/span&gt;
                &lt;/div&gt;
                &lt;div class=&quot;price&quot;&gt;
                  &lt;span class=&quot;now&quot;&gt;¥{{food.price}}&lt;/span&gt;&lt;span class=&quot;old&quot;
                                                                v-show=&quot;food.oldPrice&quot;&gt;¥{{food.price}}&lt;/span&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
    //第三个区域,shopcart区域
    &lt;shopcart ref=&quot;shopcart&quot; :selectFoods=&quot;selectFoods&quot; :deliveryPrice=&quot;seller.deliveryPrice&quot;
              :minPrice=&quot;seller.minPrice&quot;&gt;&lt;/shopcart&gt;
    //第四个区域,隐藏的食物详情区域
    &lt;food @add=&quot;addFood&quot; :food=&quot;selectedFood&quot; ref=&quot;food&quot;&gt;&lt;/food&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre><p>备注:</p>
<ul>
<li>v-for使用已经很常见了,不过这里需要了解,vue1和2有区别,现在是用vue2,所以index变量传递会变成现在这种模式(item,index) in goods</li>
</ul>
<ul>
<li>vue传递原生事件使用$event</li>
</ul>
<ul>
<li>:class=”{‘current’:currentIndex === index}”是vue的绑定class的使用方法,通过绑定一个class变量来直接操作,并且这里的逻辑会跟js代码里面对应<br>通过currentIndex和index做对比,来确认是否添加current类,他们之间的对比关系也就是menu区域和foods区域的显示区域的对比关系<br>通过添加current类来实现当前页面的区域的样式变化<br>currentIndex是一个计算属性,可以随时变化并且直接反应到dom上(看js里面逻辑)</li>
</ul>
<ul>
<li>v-show和v-if的区别官网已经说过<ol>
<li>v-if 是“真正的”条件渲染，因为它会确保在切换过程中条件块内的事件监听器和子组件适当地被销毁和重建。</li>
<li>v-if 也是惰性的：如果在初始渲染时条件为假，则什么也不做——直到条件第一次变为真时，才会开始渲染条件块。</li>
</ol>
</li>
</ul>
<p>一般来说， v-if 有更高的切换开销，而 v-show 有更高的初始渲染开销。因此，如果需要非常频繁地切换，则使用 v-show 较好；如果在运行时条件不太可能改变，则使用 v-if 较好。</p>
<ul>
<li>$refs的使用是vue操作dom的一种方式:</li>
</ul>
<pre><code>- ref 被用来给元素或子组件注册引用信息。引用信息将会注册在父组件的 $refs 对象上。


- 如果在普通的 DOM 元素上使用，引用指向的就是 DOM 元素; 如果用在子组件上，引用就指向组件实例:
</code></pre><ul>
<li>hook钩子类的使用,需要结合js里面的语法来看,这个类只是用来操作,不会产生dom的渲染,方便js控制清晰.</li>
</ul>
<h2 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a>js代码</h2><pre><code>&lt;script&gt;
  import BScroll from &apos;better-scroll&apos;; //导入better-scroll
  import shopcart from &apos;../../components/shopcart/shopcart&apos;;//导入shopcart购物车组件
  import cartcontrol from &apos;../../components/cartcontrol/cartcontrol&apos;; //导入购物组件
  import food from &apos;../../components/food/food&apos;; //导入食物详情组件

  const ERR_OK = 0; //常量,方便解耦

  export default {
    props: {
      seller: {
        type: Object
      }
    },
    data(){
      return {
        goods: [],
        listHeight: [], //用来储存foods区域的各个区块的高度(clientHeight)
        scrollY: 0 //用来存储foods区域的滚动的Y坐标
        selectedFood: {} //用来存储当前已被选择的food数据,对象保存形式
      }
    },
    computed: {
      currentIndex(){ //计算到达哪个区域的区间的时候的对应的索引值
        for (let i = 0; i &lt; this.listHeight.length; i++) {
          let height1 = this.listHeight[i]; //当前menu子块的高度
          let height2 = this.listHeight[i + 1]; //下一个menu子块的高度
          //滚动到底部的时候,height2为undefined,需要考虑这种情况
          //需要确定是在两个menu子块的高度区间
          if (!height2 || (this.scrollY &gt;= height1 &amp;&amp; this.scrollY &lt; height2)) {
            return i; //返回这个menu子块的索引
          }
        }
        return 0;
      },
      selectFoods() { //自动将所有的goods.food添加一个count属性,方便做数量运算
        let foods = [];
        this.goods.forEach((good) =&gt; {
          good.foods.forEach((food) =&gt; {
            if (food.count) {
              foods.push(food);
            }
          });
        });
        return foods;
      }
    },
    created(){
      this.classMap = [&apos;decrease&apos;, &apos;discount&apos;, &apos;special&apos;, &apos;invoice&apos;, &apos;guarantee&apos;];

      this.$http.get(&apos;/api/goods&apos;).then((response) =&gt; {
        response = response.body;
        if (response.errno === ERR_OK) {
          this.goods = response.data;
          this.$nextTick(() =&gt; { //使用$nextTick来等待异步完成之后更新dom
            this._initScroll(); //绑定滚动dom
            this._calculateHeight(); //计算foods区域的各个区域的高度
          });
        }
      });
    },
    methods: {
      selectFood(food, event){
            if (!event._constructed) {//忽略掉BScroll的事件
              return;
            }
            this.selectedFood = food; //写入当前选择的food
            this.$refs.food.show(); //显示当前选择的food的详情页
      },
      selectMenu(index, event){
        if (!event._constructed) { //忽略掉BScroll的事件
          return;
        }
        let foodsList = this.$refs.foodsWrapper.getElementsByClassName(&apos;food-list-hook&apos;);
        let el = foodsList[index];
        //类似jump to的功能,通过这个方法,跳转到指定的dom
        this.foodsScroll.scrollToElement(el, 300);
      },
      addFood(target) {
        this._drop(target);
      },
      _drop(target) {
        // 体验优化,异步执行下落动画
        this.$nextTick(() =&gt; {
          this.$refs.shopcart.drop(target); //调用shopcart的下落动画
        });
      },
      _initScroll(){
      //初始化scroll区域
        this.menuScroll = new BScroll(this.$refs.menuWrapper, {
          click: true //结合BScroll的接口使用,是否将click事件传递,默认被拦截了
        });
        this.foodsScroll = new BScroll(this.$refs.foodsWrapper, {
          probeType: 3 //结合BScroll的接口使用,3实时派发scroll事件
        });
        //结合BScroll的接口使用,监听scroll事件(实时派发的),并获取鼠标坐标
        this.foodsScroll.on(&apos;scroll&apos;, (pos) =&gt; { 
          this.scrollY = Math.abs(Math.round(pos.y));//滚动坐标会出现负的,并且是小数,所以需要处理一下
        })
      },
      //计算foods内部块的高度
      _calculateHeight(){
        let foodList = this.$refs.foodsWrapper.getElementsByClassName(&apos;food-list-hook&apos;); //获取每一个food的dom对象
        let height = 0;
        this.listHeight.push(height); //初始化第一个高度为0
        for (let i = 0; i &lt; foodList.length; i++) {
          let item = foodList[i]; //每一个item都是刚才获取的food的每一个dom
          height += item.clientHeight; //主要是为了获取每一个foods内部块的高度
          this.listHeight.push(height);
        }
      }
    },
    components: {
      shopcart,
      cartcontrol,
      food
    }
  }
&lt;/script&gt;
</code></pre><p>备注:</p>
<ul>
<li><food @add="addFood" :food="selectedFood" ref="food" \="">是通过selectFood方法写入到vue实例里面,然后传给子组件food</food></li>
</ul>
<ul>
<li>&lt;shopcart ref=”shopcart” :selectFoods=”selectFoods” 这里selectFoods被自动添加了count属性,是为了让购物车更加简单的计算已选择的food</li>
</ul>
<ul>
<li>这里最关键的是menu和food两个区域的对应处理:</li>
</ul>
<pre><code>- 在vue实例生命周期的开始created分别加载_initScroll和_calculateHeight


- 通过_calculateHeight计算foods内部每一个块的高度,组成一个数组listHeight


- 在_initScroll里面,设置了bscroll插件的一个监听事件scroll,将food区域当前的滚动到的位置的y坐标设置到一个vue实例属性scrollY this.scrollY = Math.abs(Math.round(pos.y));


- 通过计算属性currentIndex,获取到food滚动区域对应的menu区域的子块的索引,然后通过设置一个class来做样式切换变化:class=&quot;{&apos;current&apos;:currentIndex === index},实现联动


- 另外当点击menu 区域的时候,会触发selectMenu事件,也会根据点击到的menu子块的索引然后去触发food区域滚动到对应的高度区块区间this.foodsScroll.scrollToElement(el, 300);


- 这样完成整个对应.
</code></pre><ul>
<li>抛物线小球动画横跨多个vue组件(也可以说是横跨了多个DOM),整个动画会在关于购物车添加按钮的动画里面说</li>
</ul>
<ul>
<li>better-scroll需要安装,npm安装,具体参看better-scroll官网</li>
</ul>
<ul>
<li>关于在selectMenu中点击,在pc界面会出现两次事件,在移动端就只出现一次事件的问题:</li>
</ul>
<pre><code>- 原因:


- bsScrooler会监听事件(例如touchmove,click之类),并且阻止默认事件(prevent stop),并且他只会监听移动端的,pc端的没有监听


- 在pc页面上 bsScroller也派发了一次click事件,原生也派发了一次click事件

        //bsScroll的事件,有_constructed: true
        MouseEvent {isTrusted: false, _constructed: true, screenX: 0, screenY: 0, clientX: 0…}
        //pc的事件
        MouseEvent {isTrusted: true, screenX: -1867, screenY: 520, clientX: 53, clientY: 400…}    
</code></pre><ul>
<li>解决:</li>
</ul>
<pre><code>- 针对bsScroole的事件,有_constructed: true,所以做处理,return掉非bsScroll的事件
</code></pre><h2 id="css代码"><a href="#css代码" class="headerlink" title="css代码"></a>css代码</h2><pre><code>&lt;style lang=&quot;stylus&quot; rel=&quot;stylesheet/stylus&quot;&gt;
  @import &quot;../../common/stylus/mixin.styl&quot;

  .goods
    display: flex
    position: absolute //根据设计图实现,
    top: 174px //去掉header和tab的位置
    bottom: 46px //预留购物车位置
    width: 100%
    overflow: hidden
    .menu-wrapper
      flex: 0 0 80px //flex布局预留空间
      width: 80px //兼容android浏览器,不加的话会没办法预留空间
      background: #f3f5f7
      .menu-item
        display: table
        height: 54px
        width: 56px
        padding: 0 12px
        line-height: 14px
        &amp;.current
          position: relative
          z-index: 10
          margin-top: -1px
          background: #ffffff
          font-weight: 700
          .text
            border-none()
        .icon
          display: inline-block
          vertical-align: top
          width: 12px
          height: 12px
          margin-right: 2px
          background-size: 12px 12px
          background-repeat: no-repeat
          &amp;.decrease
            bg-image(&apos;decrease_3&apos;)
          &amp;.discount
            bg-image(&apos;discount_3&apos;)
          &amp;.guarantee
            bg-image(&apos;guarantee_3&apos;)
          &amp;.invoice
            bg-image(&apos;invoice_3&apos;)
          &amp;.special
            bg-image(&apos;special_3&apos;)
        .text
          display: table-cell
          width: 56px
          vertical-align: middle //table默认支持垂直居中
          border-1px(rgba(7, 17, 27, 0.1))
          font-size: 12px
    .foods-wrapper
      flex: 1
      .title
        padding-left: 14px
        height: 26px
        line-height: 26px
        border-left: 2px solid #d9dde1
        font-size: 12px
        color: rgb(147, 153, 159)
        background: #f3f5f7
      .food-item
        display: flex
        margin: 18px
        padding-bottom: 18px
        border-1px: (rgba(7, 17, 27, 0.1))
        &amp;:last-child
          border-none() 
          margin-bottom: 0
        .icon
          flex: 0 0 57px
          margin-right: 10px
        .content
          flex: 1 //flex布局等分剩下空间
          .name
            margin: 2px 0 8px 0
            height: 14px
            line-height: 14px
            font-size: 14px
            color: rgb(7, 17, 27)
          .desc, .extra
            line-height: 10px
            font-size: 10px
            color: rgb(147, 153, 159)
          .desc
            margin-bottom: 8px
            line-height: 12px
          .extra
            .count
              margin-right: 12px
          .price
            font-weight: 700
            line-height: 24px
            .now
              margin-right: 8px
              font-size: 14px
              color: rgb(240, 20, 20)
            .old
              text-decoration: line-through
              font-size: 10px
              color: rgb(240, 20, 20)
        .cartcontrol-wrapper
            position: absolute
            right: 0
            bottom: 12px   
&lt;/style&gt;
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/person.jpg"
               alt="ZhangWei2222" />
          <p class="site-author-name" itemprop="name">ZhangWei2222</p>
           
              <p class="site-description motion-element" itemprop="description">Dream high</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/">
                <span class="site-state-item-count">59</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">29</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhangWei2222</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">主题 &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
